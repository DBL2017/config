/* THIS IS A GENERATED/BUNDLED FILE BY ESBUILD */
var __defProp = Object.defineProperty;
var __defProps = Object.defineProperties;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropDescs = Object.getOwnPropertyDescriptors;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};
var __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// package.json
var require_package = __commonJS({
  "package.json"(exports, module2) {
    module2.exports = {
      name: "obsidian-paste-image-rename",
      version: "1.6.1",
      main: "main.js",
      scripts: {
        start: "node esbuild.config.mjs",
        build: "tsc -noEmit -skipLibCheck && BUILD_ENV=production node esbuild.config.mjs && cp manifest.json build",
        version: "node version-bump.mjs && git add manifest.json versions.json",
        release: "npm run build && gh release create ${npm_package_version} build/*"
      },
      keywords: [],
      author: "Reorx",
      license: "MIT",
      devDependencies: {
        "@types/node": "^18.11.18",
        "@typescript-eslint/eslint-plugin": "^5.49.0",
        "@typescript-eslint/parser": "^5.49.0",
        "builtin-modules": "^3.3.0",
        esbuild: "0.16.17",
        obsidian: "^1.1.1",
        tslib: "2.5.0",
        typescript: "4.9.4"
      },
      dependencies: {
        "cash-dom": "^8.1.2"
      }
    };
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => PasteImageRenamePlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian2 = require("obsidian");

// src/batch.ts
var import_obsidian = require("obsidian");

// src/utils.ts
var DEBUG = true;
if (DEBUG)
  console.log("DEBUG is enabled");
function debugLog(...args) {
  if (DEBUG) {
    console.log(new Date().toISOString().slice(11, 23), ...args);
  }
}
function createElementTree(rootEl, opts) {
  const result = {
    el: rootEl.createEl(opts.tag, opts),
    children: []
  };
  const children = opts.children || [];
  for (const child of children) {
    result.children.push(createElementTree(result.el, child));
  }
  return result;
}
var path = {
  // Credit: @creationix/path.js
  join(...partSegments) {
    let parts = [];
    for (let i = 0, l = partSegments.length; i < l; i++) {
      parts = parts.concat(partSegments[i].split("/"));
    }
    const newParts = [];
    for (let i = 0, l = parts.length; i < l; i++) {
      const part = parts[i];
      if (!part || part === ".")
        continue;
      else
        newParts.push(part);
    }
    if (parts[0] === "")
      newParts.unshift("");
    return newParts.join("/");
  },
  // returns the last part of a path, e.g. 'foo.jpg'
  basename(fullpath) {
    const sp = fullpath.split("/");
    return sp[sp.length - 1];
  },
  // return extension without dot, e.g. 'jpg'
  extension(fullpath) {
    const positions = [...fullpath.matchAll(new RegExp("\\.", "gi"))].map((a) => a.index);
    return fullpath.slice(positions[positions.length - 1] + 1);
  }
};
var filenameNotAllowedChars = /[^\p{L}0-9~`!@$&*()\\/-_=+{};'",<.>? ]/ug;
var sanitizer = {
  filename(s) {
    return s.replace(filenameNotAllowedChars, "").trim();
  },
  delimiter(s) {
    s = this.filename(s);
    if (!s)
      s = "-";
    return s;
  }
};
function escapeRegExp(s) {
  return s.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
}
function lockInputMethodComposition(el) {
  const state = {
    lock: false
  };
  el.addEventListener("compositionstart", () => {
    state.lock = true;
  });
  el.addEventListener("compositionend", () => {
    state.lock = false;
  });
  return state;
}

// src/batch.ts
var ImageBatchRenameModal = class extends import_obsidian.Modal {
  constructor(app, activeFile, renameFunc, onClose) {
    super(app);
    this.activeFile = activeFile;
    this.renameFunc = renameFunc;
    this.onCloseExtra = onClose;
    this.state = {
      namePattern: "",
      extPattern: "",
      nameReplace: "",
      renameTasks: []
    };
  }
  onOpen() {
    this.containerEl.addClass("image-rename-modal");
    const { contentEl, titleEl } = this;
    titleEl.setText("Batch rename embeded files");
    const namePatternSetting = new import_obsidian.Setting(contentEl).setName("Name pattern").setDesc("Please input the name pattern to match files (regex)").addText((text) => text.setValue(this.state.namePattern).onChange(
      (value) => __async(this, null, function* () {
        this.state.namePattern = value;
      })
    ));
    const npInputEl = namePatternSetting.controlEl.children[0];
    npInputEl.focus();
    const npInputState = lockInputMethodComposition(npInputEl);
    npInputEl.addEventListener("keydown", (e) => __async(this, null, function* () {
      if (e.key === "Enter" && !npInputState.lock) {
        e.preventDefault();
        if (!this.state.namePattern) {
          errorEl.innerText = 'Error: "Name pattern" could not be empty';
          errorEl.style.display = "block";
          return;
        }
        this.matchImageNames(tbodyEl);
      }
    }));
    const extPatternSetting = new import_obsidian.Setting(contentEl).setName("Extension pattern").setDesc("Please input the extension pattern to match files (regex)").addText((text) => text.setValue(this.state.extPattern).onChange(
      (value) => __async(this, null, function* () {
        this.state.extPattern = value;
      })
    ));
    const extInputEl = extPatternSetting.controlEl.children[0];
    extInputEl.addEventListener("keydown", (e) => __async(this, null, function* () {
      if (e.key === "Enter") {
        e.preventDefault();
        this.matchImageNames(tbodyEl);
      }
    }));
    const nameReplaceSetting = new import_obsidian.Setting(contentEl).setName("Name replace").setDesc("Please input the string to replace the matched name (use $1, $2 for regex groups)").addText((text) => text.setValue(this.state.nameReplace).onChange(
      (value) => __async(this, null, function* () {
        this.state.nameReplace = value;
      })
    ));
    const nrInputEl = nameReplaceSetting.controlEl.children[0];
    const nrInputState = lockInputMethodComposition(nrInputEl);
    nrInputEl.addEventListener("keydown", (e) => __async(this, null, function* () {
      if (e.key === "Enter" && !nrInputState.lock) {
        e.preventDefault();
        this.matchImageNames(tbodyEl);
      }
    }));
    const matchedContainer = contentEl.createDiv({
      cls: "matched-container"
    });
    const tableET = createElementTree(matchedContainer, {
      tag: "table",
      children: [
        {
          tag: "thead",
          children: [
            {
              tag: "tr",
              children: [
                {
                  tag: "td",
                  text: "Original path"
                },
                {
                  tag: "td",
                  text: "Renamed Name"
                }
              ]
            }
          ]
        },
        {
          tag: "tbody"
        }
      ]
    });
    const tbodyEl = tableET.children[1].el;
    const errorEl = contentEl.createDiv({
      cls: "error",
      attr: {
        style: "display: none;"
      }
    });
    new import_obsidian.Setting(contentEl).addButton((button) => {
      button.setButtonText("Rename all").setClass("mod-cta").onClick(() => {
        new ConfirmModal(
          this.app,
          "Confirm rename all",
          `Are you sure? This will rename all the ${this.state.renameTasks.length} images matched the pattern.`,
          () => {
            this.renameAll();
            this.close();
          }
        ).open();
      });
    }).addButton((button) => {
      button.setButtonText("Cancel").onClick(() => {
        this.close();
      });
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    this.onCloseExtra();
  }
  renameAll() {
    return __async(this, null, function* () {
      debugLog("renameAll", this.state);
      for (const task of this.state.renameTasks) {
        yield this.renameFunc(task.file, task.name);
      }
    });
  }
  matchImageNames(tbodyEl) {
    const { state } = this;
    const renameTasks = [];
    tbodyEl.empty();
    const fileCache = this.app.metadataCache.getFileCache(this.activeFile);
    if (!fileCache || !fileCache.embeds)
      return;
    const namePatternRegex = new RegExp(state.namePattern, "g");
    const extPatternRegex = new RegExp(state.extPattern);
    fileCache.embeds.forEach((embed) => {
      const file = this.app.metadataCache.getFirstLinkpathDest(embed.link, this.activeFile.path);
      if (!file) {
        console.warn("file not found", embed.link);
        return;
      }
      if (state.extPattern) {
        const m0 = extPatternRegex.exec(file.extension);
        if (!m0)
          return;
      }
      const stem = file.basename;
      namePatternRegex.lastIndex = 0;
      const m1 = namePatternRegex.exec(stem);
      if (!m1)
        return;
      let renamedName = file.name;
      if (state.nameReplace) {
        namePatternRegex.lastIndex = 0;
        renamedName = stem.replace(namePatternRegex, state.nameReplace);
        renamedName = `${renamedName}.${file.extension}`;
      }
      renameTasks.push({
        file,
        name: renamedName
      });
      createElementTree(tbodyEl, {
        tag: "tr",
        children: [
          {
            tag: "td",
            children: [
              {
                tag: "span",
                text: file.name
              },
              {
                tag: "div",
                text: file.path,
                attr: {
                  class: "file-path"
                }
              }
            ]
          },
          {
            tag: "td",
            children: [
              {
                tag: "span",
                text: renamedName
              },
              {
                tag: "div",
                text: path.join(file.parent.path, renamedName),
                attr: {
                  class: "file-path"
                }
              }
            ]
          }
        ]
      });
    });
    debugLog("new renameTasks", renameTasks);
    state.renameTasks = renameTasks;
  }
};
var ConfirmModal = class extends import_obsidian.Modal {
  constructor(app, title, message, onConfirm) {
    super(app);
    this.title = title;
    this.message = message;
    this.onConfirm = onConfirm;
  }
  onOpen() {
    const { contentEl, titleEl } = this;
    titleEl.setText(this.title);
    contentEl.createEl("p", {
      text: this.message
    });
    new import_obsidian.Setting(contentEl).addButton((button) => {
      button.setButtonText("Yes").setClass("mod-warning").onClick(() => {
        this.onConfirm();
        this.close();
      });
    }).addButton((button) => {
      button.setButtonText("No").onClick(() => {
        this.close();
      });
    });
  }
};

// src/template.ts
var dateTmplRegex = /{{DATE:([^}]+)}}/gm;
var frontmatterTmplRegex = /{{frontmatter:([^}]+)}}/gm;
var replaceDateVar = (s, date) => {
  const m = dateTmplRegex.exec(s);
  if (!m)
    return s;
  return s.replace(m[0], date.format(m[1]));
};
var replaceFrontmatterVar = (s, frontmatter) => {
  if (!frontmatter)
    return s;
  const m = frontmatterTmplRegex.exec(s);
  if (!m)
    return s;
  return s.replace(m[0], frontmatter[m[1]] || "");
};
var renderTemplate = (tmpl, data, frontmatter) => {
  const now = window.moment();
  let text = tmpl;
  let newtext;
  while ((newtext = replaceDateVar(text, now)) != text) {
    text = newtext;
  }
  while ((newtext = replaceFrontmatterVar(text, frontmatter)) != text) {
    text = newtext;
  }
  text = text.replace(/{{imageNameKey}}/gm, data.imageNameKey).replace(/{{fileName}}/gm, data.fileName).replace(/{{dirName}}/gm, data.dirName).replace(/{{firstHeading}}/gm, data.firstHeading);
  return text;
};

// src/main.ts
var DEFAULT_SETTINGS = {
  imageNamePattern: "{{fileName}}",
  dupNumberAtStart: false,
  dupNumberDelimiter: "-",
  dupNumberAlways: false,
  autoRename: false,
  handleAllAttachments: false,
  excludeExtensionPattern: "",
  disableRenameNotice: false
};
var PASTED_IMAGE_PREFIX = "Pasted image ";
var PasteImageRenamePlugin = class extends import_obsidian2.Plugin {
  constructor() {
    super(...arguments);
    this.modals = [];
  }
  onload() {
    return __async(this, null, function* () {
      const pkg = require_package();
      console.log(`Plugin loading: ${pkg.name} ${pkg.version} BUILD_ENV=${""}`);
      yield this.loadSettings();
      this.registerEvent(
        this.app.vault.on("create", (file) => {
          if (!(file instanceof import_obsidian2.TFile))
            return;
          const timeGapMs = new Date().getTime() - file.stat.ctime;
          if (timeGapMs > 1e3)
            return;
          if (isMarkdownFile(file))
            return;
          if (isPastedImage(file)) {
            debugLog("pasted image created", file);
            this.startRenameProcess(file, this.settings.autoRename);
          } else {
            if (this.settings.handleAllAttachments) {
              debugLog("handleAllAttachments for file", file);
              if (this.testExcludeExtension(file)) {
                debugLog("excluded file by ext", file);
                return;
              }
              this.startRenameProcess(file, this.settings.autoRename);
            }
          }
        })
      );
      const startBatchRenameProcess = () => {
        this.openBatchRenameModal();
      };
      this.addCommand({
        id: "batch-rename-embeded-files",
        name: "Batch rename embeded files (in the current file)",
        callback: startBatchRenameProcess
      });
      if (DEBUG) {
        this.addRibbonIcon("wand-glyph", "Batch rename embeded files", startBatchRenameProcess);
      }
      const batchRenameAllImages = () => {
        this.batchRenameAllImages();
      };
      this.addCommand({
        id: "batch-rename-all-images",
        name: "Batch rename all images instantly (in the current file)",
        callback: batchRenameAllImages
      });
      if (DEBUG) {
        this.addRibbonIcon("wand-glyph", "Batch rename all images instantly (in the current file)", batchRenameAllImages);
      }
      this.addSettingTab(new SettingTab(this.app, this));
    });
  }
  startRenameProcess(file, autoRename = false) {
    return __async(this, null, function* () {
      const activeFile = this.getActiveFile();
      if (!activeFile) {
        new import_obsidian2.Notice("Error: No active file found.");
        return;
      }
      const { stem, newName, isMeaningful } = this.generateNewName(file, activeFile);
      debugLog("generated newName:", newName, isMeaningful);
      if (!isMeaningful || !autoRename) {
        this.openRenameModal(file, isMeaningful ? stem : "", activeFile.path);
        return;
      }
      this.renameFile(file, newName, activeFile.path, true);
    });
  }
  renameFile(file, inputNewName, sourcePath, replaceCurrentLine) {
    return __async(this, null, function* () {
      const { name: newName } = yield this.deduplicateNewName(inputNewName, file);
      debugLog("deduplicated newName:", newName);
      const originName = file.name;
      const linkText = this.app.fileManager.generateMarkdownLink(file, sourcePath);
      if (newName.lastIndexOf("/") > 0) {
        const newDir = path.join(file.parent.path, newName.substring(0, newName.lastIndexOf("/")));
        debugLog("newDir", newDir);
        this.app.vault.adapter.mkdir(newDir);
      }
      const newPath = path.join(file.parent.path, newName);
      try {
        yield this.app.fileManager.renameFile(file, newPath);
      } catch (err) {
        new import_obsidian2.Notice(`Failed to rename ${newName}: ${err}`);
        throw err;
      }
      if (!replaceCurrentLine) {
        return;
      }
      const newLinkText = this.app.fileManager.generateMarkdownLink(file, sourcePath);
      debugLog("replace text", linkText, newLinkText);
      const editor = this.getActiveEditor();
      if (!editor) {
        new import_obsidian2.Notice(`Failed to rename ${newName}: no active editor`);
        return;
      }
      const cursor = editor.getCursor();
      const line = editor.getLine(cursor.line);
      const replacedLine = line.replace(linkText, newLinkText);
      debugLog("current line -> replaced line", line, replacedLine);
      editor.transaction({
        changes: [
          {
            from: __spreadProps(__spreadValues({}, cursor), { ch: 0 }),
            to: __spreadProps(__spreadValues({}, cursor), { ch: line.length }),
            text: replacedLine
          }
        ]
      });
      if (!this.settings.disableRenameNotice) {
        new import_obsidian2.Notice(`Renamed ${originName} to ${newName}`);
      }
    });
  }
  openRenameModal(file, newName, sourcePath) {
    const modal = new ImageRenameModal(
      this.app,
      file,
      newName,
      (confirmedName) => {
        debugLog("confirmedName:", confirmedName);
        this.renameFile(file, confirmedName, sourcePath, true);
      },
      () => {
        this.modals.splice(this.modals.indexOf(modal), 1);
      }
    );
    this.modals.push(modal);
    modal.open();
    debugLog("modals count", this.modals.length);
  }
  openBatchRenameModal() {
    const activeFile = this.getActiveFile();
    const modal = new ImageBatchRenameModal(
      this.app,
      activeFile,
      (file, name) => __async(this, null, function* () {
        yield this.renameFile(file, name, activeFile.path);
      }),
      () => {
        this.modals.splice(this.modals.indexOf(modal), 1);
      }
    );
    this.modals.push(modal);
    modal.open();
  }
  batchRenameAllImages() {
    return __async(this, null, function* () {
      const activeFile = this.getActiveFile();
      const fileCache = this.app.metadataCache.getFileCache(activeFile);
      if (!fileCache || !fileCache.embeds)
        return;
      const extPatternRegex = /jpe?g|png|gif|tiff|webp/i;
      for (const embed of fileCache.embeds) {
        const file = this.app.metadataCache.getFirstLinkpathDest(embed.link, activeFile.path);
        if (!file) {
          console.warn("file not found", embed.link);
          return;
        }
        const m0 = extPatternRegex.exec(file.extension);
        if (!m0)
          return;
        const { newName, isMeaningful } = this.generateNewName(file, activeFile);
        debugLog("generated newName:", newName, isMeaningful);
        if (!isMeaningful) {
          new import_obsidian2.Notice("Failed to batch rename images: the generated name is not meaningful");
          break;
        }
        yield this.renameFile(file, newName, activeFile.path, false);
      }
    });
  }
  // returns a new name for the input file, with extension
  generateNewName(file, activeFile) {
    let imageNameKey = "";
    let firstHeading = "";
    let frontmatter;
    const fileCache = this.app.metadataCache.getFileCache(activeFile);
    if (fileCache) {
      debugLog("frontmatter", fileCache.frontmatter);
      frontmatter = fileCache.frontmatter;
      imageNameKey = (frontmatter == null ? void 0 : frontmatter.imageNameKey) || "";
      firstHeading = getFirstHeading(fileCache.headings);
    } else {
      console.warn("could not get file cache from active file", activeFile.name);
    }
    const stem = renderTemplate(
      this.settings.imageNamePattern,
      {
        imageNameKey,
        fileName: activeFile.basename,
        dirName: activeFile.parent.name,
        firstHeading
      },
      frontmatter
    );
    const meaninglessRegex = new RegExp(`[${this.settings.dupNumberDelimiter}\\s]`, "gm");
    return {
      stem,
      newName: stem + "." + file.extension,
      isMeaningful: stem.replace(meaninglessRegex, "") !== ""
    };
  }
  // newName: foo.ext
  deduplicateNewName(newName, file) {
    return __async(this, null, function* () {
      const dir = file.parent.path;
      const listed = yield this.app.vault.adapter.list(dir);
      debugLog("sibling files", listed);
      const newNameExt = path.extension(newName), newNameStem = newName.slice(0, newName.length - newNameExt.length - 1), newNameStemEscaped = escapeRegExp(newNameStem), delimiter = this.settings.dupNumberDelimiter, delimiterEscaped = escapeRegExp(delimiter);
      let dupNameRegex;
      if (this.settings.dupNumberAtStart) {
        dupNameRegex = new RegExp(
          `^(?<number>\\d+)${delimiterEscaped}(?<name>${newNameStemEscaped})\\.${newNameExt}$`
        );
      } else {
        dupNameRegex = new RegExp(
          `^(?<name>${newNameStemEscaped})${delimiterEscaped}(?<number>\\d+)\\.${newNameExt}$`
        );
      }
      debugLog("dupNameRegex", dupNameRegex);
      const dupNameNumbers = [];
      let isNewNameExist = false;
      for (let sibling of listed.files) {
        sibling = path.basename(sibling);
        if (sibling == newName) {
          isNewNameExist = true;
          continue;
        }
        const m = dupNameRegex.exec(sibling);
        if (!m)
          continue;
        dupNameNumbers.push(parseInt(m.groups.number));
      }
      if (isNewNameExist || this.settings.dupNumberAlways) {
        const newNumber = dupNameNumbers.length > 0 ? Math.max(...dupNameNumbers) + 1 : 1;
        if (this.settings.dupNumberAtStart) {
          newName = `${newNumber}${delimiter}${newNameStem}.${newNameExt}`;
        } else {
          newName = `${newNameStem}${delimiter}${newNumber}.${newNameExt}`;
        }
      }
      return {
        name: newName,
        stem: newName.slice(0, newName.length - newNameExt.length - 1),
        extension: newNameExt
      };
    });
  }
  getActiveFile() {
    const view = this.app.workspace.getActiveViewOfType(import_obsidian2.MarkdownView);
    const file = view == null ? void 0 : view.file;
    debugLog("active file", file == null ? void 0 : file.path);
    return file;
  }
  getActiveEditor() {
    const view = this.app.workspace.getActiveViewOfType(import_obsidian2.MarkdownView);
    return view == null ? void 0 : view.editor;
  }
  onunload() {
    this.modals.map((modal) => modal.close());
  }
  testExcludeExtension(file) {
    const pattern = this.settings.excludeExtensionPattern;
    if (!pattern)
      return false;
    return new RegExp(pattern).test(file.extension);
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.saveData(this.settings);
    });
  }
};
function getFirstHeading(headings) {
  if (headings && headings.length > 0) {
    for (const heading of headings) {
      if (heading.level === 1) {
        return heading.heading;
      }
    }
  }
  return "";
}
function isPastedImage(file) {
  if (file instanceof import_obsidian2.TFile) {
    if (file.name.startsWith(PASTED_IMAGE_PREFIX)) {
      return true;
    }
  }
  return false;
}
function isMarkdownFile(file) {
  if (file instanceof import_obsidian2.TFile) {
    if (file.extension === "md") {
      return true;
    }
  }
  return false;
}
var ImageRenameModal = class extends import_obsidian2.Modal {
  constructor(app, src, stem, renameFunc, onClose) {
    super(app);
    this.src = src;
    this.stem = stem;
    this.renameFunc = renameFunc;
    this.onCloseExtra = onClose;
  }
  onOpen() {
    this.containerEl.addClass("image-rename-modal");
    const { contentEl, titleEl } = this;
    titleEl.setText("Rename image");
    const imageContainer = contentEl.createDiv({
      cls: "image-container"
    });
    imageContainer.createEl("img", {
      attr: {
        src: this.app.vault.getResourcePath(this.src)
      }
    });
    let stem = this.stem;
    const ext = this.src.extension;
    const getNewName = (stem2) => stem2 + "." + ext;
    const getNewPath = (stem2) => path.join(this.src.parent.path, getNewName(stem2));
    const infoET = createElementTree(contentEl, {
      tag: "ul",
      cls: "info",
      children: [
        {
          tag: "li",
          children: [
            {
              tag: "span",
              text: "Origin path"
            },
            {
              tag: "span",
              text: this.src.path
            }
          ]
        },
        {
          tag: "li",
          children: [
            {
              tag: "span",
              text: "New path"
            },
            {
              tag: "span",
              text: getNewPath(stem)
            }
          ]
        }
      ]
    });
    const doRename = () => __async(this, null, function* () {
      debugLog("doRename", `stem=${stem}`);
      this.renameFunc(getNewName(stem));
    });
    const nameSetting = new import_obsidian2.Setting(contentEl).setName("New name").setDesc("Please input the new name for the image (without extension)").addText((text) => text.setValue(stem).onChange(
      (value) => __async(this, null, function* () {
        stem = sanitizer.filename(value);
        infoET.children[1].children[1].el.innerText = getNewPath(stem);
      })
    ));
    const nameInputEl = nameSetting.controlEl.children[0];
    nameInputEl.focus();
    const nameInputState = lockInputMethodComposition(nameInputEl);
    nameInputEl.addEventListener("keydown", (e) => __async(this, null, function* () {
      if (e.key === "Enter" && !nameInputState.lock) {
        e.preventDefault();
        if (!stem) {
          errorEl.innerText = 'Error: "New name" could not be empty';
          errorEl.style.display = "block";
          return;
        }
        doRename();
        this.close();
      }
    }));
    const errorEl = contentEl.createDiv({
      cls: "error",
      attr: {
        style: "display: none;"
      }
    });
    new import_obsidian2.Setting(contentEl).addButton((button) => {
      button.setButtonText("Rename").onClick(() => {
        doRename();
        this.close();
      });
    }).addButton((button) => {
      button.setButtonText("Cancel").onClick(() => {
        this.close();
      });
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    this.onCloseExtra();
  }
};
var imageNamePatternDesc = `
The pattern indicates how the new name should be generated.

Available variables:
- {{fileName}}: name of the active file, without ".md" extension.
- {{dirName}}: name of the directory which contains the document (the root directory of vault results in an empty variable).
- {{imageNameKey}}: this variable is read from the markdown file's frontmatter, from the same key "imageNameKey".
- {{DATE:$FORMAT}}: use "$FORMAT" to format the current date, "$FORMAT" must be a Moment.js format string, e.g. {{DATE:YYYY-MM-DD}}.

Here are some examples from pattern to image names (repeat in sequence), variables: fileName = "My note", imageNameKey = "foo":
- {{fileName}}: My note, My note-1, My note-2
- {{imageNameKey}}: foo, foo-1, foo-2
- {{imageNameKey}}-{{DATE:YYYYMMDD}}: foo-20220408, foo-20220408-1, foo-20220408-2
`;
var SettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian2.Setting(containerEl).setName("Image name pattern").setDesc(imageNamePatternDesc).setClass("long-description-setting-item").addText((text) => text.setPlaceholder("{{imageNameKey}}").setValue(this.plugin.settings.imageNamePattern).onChange(
      (value) => __async(this, null, function* () {
        this.plugin.settings.imageNamePattern = value;
        yield this.plugin.saveSettings();
      })
    ));
    new import_obsidian2.Setting(containerEl).setName("Duplicate number at start (or end)").setDesc(`If enabled, duplicate number will be added at the start as prefix for the image name, otherwise it will be added at the end as suffix for the image name.`).addToggle((toggle) => toggle.setValue(this.plugin.settings.dupNumberAtStart).onChange(
      (value) => __async(this, null, function* () {
        this.plugin.settings.dupNumberAtStart = value;
        yield this.plugin.saveSettings();
      })
    ));
    new import_obsidian2.Setting(containerEl).setName("Duplicate number delimiter").setDesc(`The delimiter to generate the number prefix/suffix for duplicated names. For example, if the value is "-", the suffix will be like "-1", "-2", "-3", and the prefix will be like "1-", "2-", "3-". Only characters that are valid in file names are allowed.`).addText((text) => text.setValue(this.plugin.settings.dupNumberDelimiter).onChange(
      (value) => __async(this, null, function* () {
        this.plugin.settings.dupNumberDelimiter = sanitizer.delimiter(value);
        yield this.plugin.saveSettings();
      })
    ));
    new import_obsidian2.Setting(containerEl).setName("Always add duplicate number").setDesc(`If enabled, duplicate number will always be added to the image name. Otherwise, it will only be added when the name is duplicated.`).addToggle((toggle) => toggle.setValue(this.plugin.settings.dupNumberAlways).onChange(
      (value) => __async(this, null, function* () {
        this.plugin.settings.dupNumberAlways = value;
        yield this.plugin.saveSettings();
      })
    ));
    new import_obsidian2.Setting(containerEl).setName("Auto rename").setDesc(`By default, the rename modal will always be shown to confirm before renaming, if this option is set, the image will be auto renamed after pasting.`).addToggle((toggle) => toggle.setValue(this.plugin.settings.autoRename).onChange(
      (value) => __async(this, null, function* () {
        this.plugin.settings.autoRename = value;
        yield this.plugin.saveSettings();
      })
    ));
    new import_obsidian2.Setting(containerEl).setName("Handle all attachments").setDesc(`By default, the plugin only handles images that starts with "Pasted image " in name,
			which is the prefix Obsidian uses to create images from pasted content.
			If this option is set, the plugin will handle all attachments that are created in the vault.`).addToggle((toggle) => toggle.setValue(this.plugin.settings.handleAllAttachments).onChange(
      (value) => __async(this, null, function* () {
        this.plugin.settings.handleAllAttachments = value;
        yield this.plugin.saveSettings();
      })
    ));
    new import_obsidian2.Setting(containerEl).setName("Exclude extension pattern").setDesc(`This option is only useful when "Handle all attachments" is enabled.
			Write a Regex pattern to exclude certain extensions from being handled. Only the first line will be used.`).setClass("single-line-textarea").addTextArea((text) => text.setPlaceholder("docx?|xlsx?|pptx?|zip|rar").setValue(this.plugin.settings.excludeExtensionPattern).onChange(
      (value) => __async(this, null, function* () {
        this.plugin.settings.excludeExtensionPattern = value;
        yield this.plugin.saveSettings();
      })
    ));
    new import_obsidian2.Setting(containerEl).setName("Disable rename notice").setDesc(`Turn off this option if you don't want to see the notice when renaming images.
			Note that Obsidian may display a notice when a link has changed, this option cannot disable that.`).addToggle((toggle) => toggle.setValue(this.plugin.settings.disableRenameNotice).onChange(
      (value) => __async(this, null, function* () {
        this.plugin.settings.disableRenameNotice = value;
        yield this.plugin.saveSettings();
      })
    ));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vcGFja2FnZS5qc29uIiwgIi4uL3NyYy9tYWluLnRzIiwgIi4uL3NyYy9iYXRjaC50cyIsICIuLi9zcmMvdXRpbHMudHMiLCAiLi4vc3JjL3RlbXBsYXRlLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJ7XG5cdFwibmFtZVwiOiBcIm9ic2lkaWFuLXBhc3RlLWltYWdlLXJlbmFtZVwiLFxuXHRcInZlcnNpb25cIjogXCIxLjYuMVwiLFxuXHRcIm1haW5cIjogXCJtYWluLmpzXCIsXG5cdFwic2NyaXB0c1wiOiB7XG5cdFx0XCJzdGFydFwiOiBcIm5vZGUgZXNidWlsZC5jb25maWcubWpzXCIsXG5cdFx0XCJidWlsZFwiOiBcInRzYyAtbm9FbWl0IC1za2lwTGliQ2hlY2sgJiYgQlVJTERfRU5WPXByb2R1Y3Rpb24gbm9kZSBlc2J1aWxkLmNvbmZpZy5tanMgJiYgY3AgbWFuaWZlc3QuanNvbiBidWlsZFwiLFxuXHRcdFwidmVyc2lvblwiOiBcIm5vZGUgdmVyc2lvbi1idW1wLm1qcyAmJiBnaXQgYWRkIG1hbmlmZXN0Lmpzb24gdmVyc2lvbnMuanNvblwiLFxuXHRcdFwicmVsZWFzZVwiOiBcIm5wbSBydW4gYnVpbGQgJiYgZ2ggcmVsZWFzZSBjcmVhdGUgJHtucG1fcGFja2FnZV92ZXJzaW9ufSBidWlsZC8qXCJcblx0fSxcblx0XCJrZXl3b3Jkc1wiOiBbXSxcblx0XCJhdXRob3JcIjogXCJSZW9yeFwiLFxuXHRcImxpY2Vuc2VcIjogXCJNSVRcIixcblx0XCJkZXZEZXBlbmRlbmNpZXNcIjoge1xuXHRcdFwiQHR5cGVzL25vZGVcIjogXCJeMTguMTEuMThcIixcblx0XHRcIkB0eXBlc2NyaXB0LWVzbGludC9lc2xpbnQtcGx1Z2luXCI6IFwiXjUuNDkuMFwiLFxuXHRcdFwiQHR5cGVzY3JpcHQtZXNsaW50L3BhcnNlclwiOiBcIl41LjQ5LjBcIixcblx0XHRcImJ1aWx0aW4tbW9kdWxlc1wiOiBcIl4zLjMuMFwiLFxuXHRcdFwiZXNidWlsZFwiOiBcIjAuMTYuMTdcIixcblx0XHRcIm9ic2lkaWFuXCI6IFwiXjEuMS4xXCIsXG5cdFx0XCJ0c2xpYlwiOiBcIjIuNS4wXCIsXG5cdFx0XCJ0eXBlc2NyaXB0XCI6IFwiNC45LjRcIlxuXHR9LFxuXHRcImRlcGVuZGVuY2llc1wiOiB7XG5cdFx0XCJjYXNoLWRvbVwiOiBcIl44LjEuMlwiXG5cdH1cbn1cbiIsICIvKiBUT0RPczpcbiAqIC0gW3hdIGNoZWNrIG5hbWUgZXhpc3RlbmNlIHdoZW4gc2F2aW5nXG4gKiAtIFt4XSBpbWFnZU5hbWVLZXkgaW4gZnJvbnRtYXR0ZXJcbiAqIC0gW3hdIGFmdGVyIHJlbmFtaW5nLCBjdXJzb3Igc2hvdWxkIGJlIHBsYWNlZCBhZnRlciB0aGUgaW1hZ2UgZmlsZSBsaW5rXG4gKiAtIFt4XSBoYW5kbGUgaW1hZ2UgaW5zZXJ0IGZyb20gZHJhZyduIGRyb3BcbiAqIC0gWyBdIHNlbGVjdCB0ZXh0IHdoZW4gb3BlbmluZyB0aGUgcmVuYW1pbmcgbW9kYWwsIG1ha2UgdGhpcyBhbiBvcHRpb25cbiAqIC0gWyBdIGFkZCBidXR0b24gZm9yIHVzZSB0aGUgY3VycmVudCBmaWxlIG5hbWUsIGltYWdlTmFtZUtleSwgbGFzdCBpbnB1dCBuYW1lLFxuICogICAgICAgc2VnbWVudHMgb2YgbGFzdCBpbnB1dCBuYW1lXG4gKiAtIFt4XSBiYXRjaCByZW5hbWUgYWxsIHBhc3RlZCBpbWFnZXMgaW4gYSBmaWxlXG4gKiAtIFsgXSBhZGQgcnVsZXMgZm9yIG1vdmluZyBtYXRjaGVkIGltYWdlcyB0byBkZXN0aW5hdGlvbiBmb2xkZXJcbiAqL1xuaW1wb3J0IHtcbiAgQXBwLFxuICBIZWFkaW5nQ2FjaGUsXG4gIE1hcmtkb3duVmlldyxcbiAgTW9kYWwsXG4gIE5vdGljZSxcbiAgUGx1Z2luLFxuICBQbHVnaW5TZXR0aW5nVGFiLFxuICBTZXR0aW5nLFxuICBUQWJzdHJhY3RGaWxlLFxuICBURmlsZSxcbn0gZnJvbSAnb2JzaWRpYW4nO1xuXG5pbXBvcnQgeyBJbWFnZUJhdGNoUmVuYW1lTW9kYWwgfSBmcm9tICcuL2JhdGNoJztcbmltcG9ydCB7IHJlbmRlclRlbXBsYXRlIH0gZnJvbSAnLi90ZW1wbGF0ZSc7XG5pbXBvcnQge1xuICBjcmVhdGVFbGVtZW50VHJlZSxcbiAgREVCVUcsXG4gIGRlYnVnTG9nLFxuICBlc2NhcGVSZWdFeHAsXG4gIGxvY2tJbnB1dE1ldGhvZENvbXBvc2l0aW9uLFxuICBOYW1lT2JqLFxuICBwYXRoLFxuICBzYW5pdGl6ZXIsXG59IGZyb20gJy4vdXRpbHMnO1xuXG5pbnRlcmZhY2UgUGx1Z2luU2V0dGluZ3Mge1xuXHQvLyB7e2ltYWdlTmFtZUtleX19LXt7REFURTpZWVlZTU1ERH19XG5cdGltYWdlTmFtZVBhdHRlcm46IHN0cmluZ1xuXHRkdXBOdW1iZXJBdFN0YXJ0OiBib29sZWFuXG5cdGR1cE51bWJlckRlbGltaXRlcjogc3RyaW5nXG5cdGR1cE51bWJlckFsd2F5czogYm9vbGVhblxuXHRhdXRvUmVuYW1lOiBib29sZWFuXG5cdGhhbmRsZUFsbEF0dGFjaG1lbnRzOiBib29sZWFuXG5cdGV4Y2x1ZGVFeHRlbnNpb25QYXR0ZXJuOiBzdHJpbmdcblx0ZGlzYWJsZVJlbmFtZU5vdGljZTogYm9vbGVhblxufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBQbHVnaW5TZXR0aW5ncyA9IHtcblx0aW1hZ2VOYW1lUGF0dGVybjogJ3t7ZmlsZU5hbWV9fScsXG5cdGR1cE51bWJlckF0U3RhcnQ6IGZhbHNlLFxuXHRkdXBOdW1iZXJEZWxpbWl0ZXI6ICctJyxcblx0ZHVwTnVtYmVyQWx3YXlzOiBmYWxzZSxcblx0YXV0b1JlbmFtZTogZmFsc2UsXG5cdGhhbmRsZUFsbEF0dGFjaG1lbnRzOiBmYWxzZSxcblx0ZXhjbHVkZUV4dGVuc2lvblBhdHRlcm46ICcnLFxuXHRkaXNhYmxlUmVuYW1lTm90aWNlOiBmYWxzZSxcbn1cblxuY29uc3QgUEFTVEVEX0lNQUdFX1BSRUZJWCA9ICdQYXN0ZWQgaW1hZ2UgJ1xuXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBhc3RlSW1hZ2VSZW5hbWVQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuXHRzZXR0aW5nczogUGx1Z2luU2V0dGluZ3Ncblx0bW9kYWxzOiBNb2RhbFtdID0gW11cblx0ZXhjbHVkZUV4dGVuc2lvblJlZ2V4OiBSZWdFeHBcblxuXHRhc3luYyBvbmxvYWQoKSB7XG5cdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby12YXItcmVxdWlyZXNcblx0XHRjb25zdCBwa2cgPSByZXF1aXJlKCcuLi9wYWNrYWdlLmpzb24nKVxuXHRcdGNvbnNvbGUubG9nKGBQbHVnaW4gbG9hZGluZzogJHtwa2cubmFtZX0gJHtwa2cudmVyc2lvbn0gQlVJTERfRU5WPSR7cHJvY2Vzcy5lbnYuQlVJTERfRU5WfWApXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudChcblx0XHRcdHRoaXMuYXBwLnZhdWx0Lm9uKCdjcmVhdGUnLCAoZmlsZSkgPT4ge1xuXHRcdFx0XHQvLyBkZWJ1Z0xvZygnZmlsZSBjcmVhdGVkJywgZmlsZSlcblx0XHRcdFx0aWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSlcblx0XHRcdFx0XHRyZXR1cm5cblx0XHRcdFx0Y29uc3QgdGltZUdhcE1zID0gKG5ldyBEYXRlKCkuZ2V0VGltZSgpKSAtIGZpbGUuc3RhdC5jdGltZVxuXHRcdFx0XHQvLyBpZiB0aGUgZmlsZSBpcyBjcmVhdGVkIG1vcmUgdGhhbiAxIHNlY29uZCBhZ28sIHRoZSBldmVudCBpcyBtb3N0IGxpa2VseSBiZSBmaXJlZCBvbiB2YXVsdCBpbml0aWFsaXphdGlvbiB3aGVuIHN0YXJ0aW5nIE9ic2lkaWFuIGFwcCwgaWdub3JlIGl0XG5cdFx0XHRcdGlmICh0aW1lR2FwTXMgPiAxMDAwKVxuXHRcdFx0XHRcdHJldHVyblxuXHRcdFx0XHQvLyBhbHdheXMgaWdub3JlIG1hcmtkb3duIGZpbGUgY3JlYXRpb25cblx0XHRcdFx0aWYgKGlzTWFya2Rvd25GaWxlKGZpbGUpKVxuXHRcdFx0XHRcdHJldHVyblxuXHRcdFx0XHRpZiAoaXNQYXN0ZWRJbWFnZShmaWxlKSkge1xuXHRcdFx0XHRcdGRlYnVnTG9nKCdwYXN0ZWQgaW1hZ2UgY3JlYXRlZCcsIGZpbGUpXG5cdFx0XHRcdFx0dGhpcy5zdGFydFJlbmFtZVByb2Nlc3MoZmlsZSwgdGhpcy5zZXR0aW5ncy5hdXRvUmVuYW1lKVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmhhbmRsZUFsbEF0dGFjaG1lbnRzKSB7XG5cdFx0XHRcdFx0XHRkZWJ1Z0xvZygnaGFuZGxlQWxsQXR0YWNobWVudHMgZm9yIGZpbGUnLCBmaWxlKVxuXHRcdFx0XHRcdFx0aWYgKHRoaXMudGVzdEV4Y2x1ZGVFeHRlbnNpb24oZmlsZSkpIHtcblx0XHRcdFx0XHRcdFx0ZGVidWdMb2coJ2V4Y2x1ZGVkIGZpbGUgYnkgZXh0JywgZmlsZSlcblx0XHRcdFx0XHRcdFx0cmV0dXJuXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR0aGlzLnN0YXJ0UmVuYW1lUHJvY2VzcyhmaWxlLCB0aGlzLnNldHRpbmdzLmF1dG9SZW5hbWUpXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdClcblxuXHRcdGNvbnN0IHN0YXJ0QmF0Y2hSZW5hbWVQcm9jZXNzID0gKCkgPT4ge1xuXHRcdFx0dGhpcy5vcGVuQmF0Y2hSZW5hbWVNb2RhbCgpXG5cdFx0fVxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ2JhdGNoLXJlbmFtZS1lbWJlZGVkLWZpbGVzJyxcblx0XHRcdG5hbWU6ICdCYXRjaCByZW5hbWUgZW1iZWRlZCBmaWxlcyAoaW4gdGhlIGN1cnJlbnQgZmlsZSknLFxuXHRcdFx0Y2FsbGJhY2s6IHN0YXJ0QmF0Y2hSZW5hbWVQcm9jZXNzLFxuXHRcdH0pXG5cdFx0aWYgKERFQlVHKSB7XG5cdFx0XHR0aGlzLmFkZFJpYmJvbkljb24oJ3dhbmQtZ2x5cGgnLCAnQmF0Y2ggcmVuYW1lIGVtYmVkZWQgZmlsZXMnLCBzdGFydEJhdGNoUmVuYW1lUHJvY2Vzcylcblx0XHR9XG5cblx0XHRjb25zdCBiYXRjaFJlbmFtZUFsbEltYWdlcyA9ICgpID0+IHtcblx0XHRcdHRoaXMuYmF0Y2hSZW5hbWVBbGxJbWFnZXMoKVxuXHRcdH1cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdiYXRjaC1yZW5hbWUtYWxsLWltYWdlcycsXG5cdFx0XHRuYW1lOiAnQmF0Y2ggcmVuYW1lIGFsbCBpbWFnZXMgaW5zdGFudGx5IChpbiB0aGUgY3VycmVudCBmaWxlKScsXG5cdFx0XHRjYWxsYmFjazogYmF0Y2hSZW5hbWVBbGxJbWFnZXMsXG5cdFx0fSlcblx0XHRpZiAoREVCVUcpIHtcblx0XHRcdHRoaXMuYWRkUmliYm9uSWNvbignd2FuZC1nbHlwaCcsICdCYXRjaCByZW5hbWUgYWxsIGltYWdlcyBpbnN0YW50bHkgKGluIHRoZSBjdXJyZW50IGZpbGUpJywgYmF0Y2hSZW5hbWVBbGxJbWFnZXMpXG5cdFx0fVxuXG5cdFx0Ly8gYWRkIHNldHRpbmdzIHRhYlxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXG5cdH1cblxuXHRhc3luYyBzdGFydFJlbmFtZVByb2Nlc3MoZmlsZTogVEZpbGUsIGF1dG9SZW5hbWUgPSBmYWxzZSkge1xuXHRcdC8vIGdldCBhY3RpdmUgZmlsZSBmaXJzdFxuXHRcdGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmdldEFjdGl2ZUZpbGUoKVxuXHRcdGlmICghYWN0aXZlRmlsZSkge1xuXHRcdFx0bmV3IE5vdGljZSgnRXJyb3I6IE5vIGFjdGl2ZSBmaWxlIGZvdW5kLicpXG5cdFx0XHRyZXR1cm5cblx0XHR9XG5cblx0XHRjb25zdCB7IHN0ZW0sIG5ld05hbWUsIGlzTWVhbmluZ2Z1bCB9PSB0aGlzLmdlbmVyYXRlTmV3TmFtZShmaWxlLCBhY3RpdmVGaWxlKVxuXHRcdGRlYnVnTG9nKCdnZW5lcmF0ZWQgbmV3TmFtZTonLCBuZXdOYW1lLCBpc01lYW5pbmdmdWwpXG5cblx0XHRpZiAoIWlzTWVhbmluZ2Z1bCB8fCAhYXV0b1JlbmFtZSkge1xuXHRcdFx0dGhpcy5vcGVuUmVuYW1lTW9kYWwoZmlsZSwgaXNNZWFuaW5nZnVsID8gc3RlbSA6ICcnLCBhY3RpdmVGaWxlLnBhdGgpXG5cdFx0XHRyZXR1cm5cblx0XHR9XG5cdFx0dGhpcy5yZW5hbWVGaWxlKGZpbGUsIG5ld05hbWUsIGFjdGl2ZUZpbGUucGF0aCwgdHJ1ZSlcblx0fVxuXG5cdGFzeW5jIHJlbmFtZUZpbGUoZmlsZTogVEZpbGUsIGlucHV0TmV3TmFtZTogc3RyaW5nLCBzb3VyY2VQYXRoOiBzdHJpbmcsIHJlcGxhY2VDdXJyZW50TGluZT86IGJvb2xlYW4pIHtcblx0XHQvLyBkZWR1cGxpY2F0ZSBuYW1lXG5cdFx0Y29uc3QgeyBuYW1lOm5ld05hbWUgfSA9IGF3YWl0IHRoaXMuZGVkdXBsaWNhdGVOZXdOYW1lKGlucHV0TmV3TmFtZSwgZmlsZSlcblx0XHRkZWJ1Z0xvZygnZGVkdXBsaWNhdGVkIG5ld05hbWU6JywgbmV3TmFtZSlcblx0XHRjb25zdCBvcmlnaW5OYW1lID0gZmlsZS5uYW1lXG5cblx0XHQvLyBnZW5lcmF0ZSBsaW5rVGV4dCB1c2luZyBPYnNpZGlhbiBBUEksIGxpbmtUZXh0IGlzIGVpdGhlciAgIVtdKGZpbGVuYW1lLnBuZykgb3IgIVtbZmlsZW5hbWUucG5nXV0gYWNjb3JkaW5nIHRvIHRoZSBcIlVzZSBbW1dpa2lsaW5rc11dXCIgc2V0dGluZy5cblx0XHRjb25zdCBsaW5rVGV4dCA9IHRoaXMuYXBwLmZpbGVNYW5hZ2VyLmdlbmVyYXRlTWFya2Rvd25MaW5rKGZpbGUsIHNvdXJjZVBhdGgpXG5cbiAgICAgICAgaWYgKG5ld05hbWUubGFzdEluZGV4T2YoXCIvXCIpID4gMCkge1xuXHRcdFx0Y29uc3QgbmV3RGlyID0gcGF0aC5qb2luKGZpbGUucGFyZW50LnBhdGgsIG5ld05hbWUuc3Vic3RyaW5nKDAsIG5ld05hbWUubGFzdEluZGV4T2YoXCIvXCIpKSlcblx0XHRcdGRlYnVnTG9nKCduZXdEaXInLCBuZXdEaXIpXG5cdFx0XHR0aGlzLmFwcC52YXVsdC5hZGFwdGVyLm1rZGlyKG5ld0Rpcilcblx0XHR9XG5cdFx0Ly8gZmlsZSBzeXN0ZW0gb3BlcmF0aW9uOiByZW5hbWUgdGhlIGZpbGVcblx0XHRjb25zdCBuZXdQYXRoID0gcGF0aC5qb2luKGZpbGUucGFyZW50LnBhdGgsIG5ld05hbWUpXG5cdFx0dHJ5IHtcblx0XHRcdGF3YWl0IHRoaXMuYXBwLmZpbGVNYW5hZ2VyLnJlbmFtZUZpbGUoZmlsZSwgbmV3UGF0aClcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdG5ldyBOb3RpY2UoYEZhaWxlZCB0byByZW5hbWUgJHtuZXdOYW1lfTogJHtlcnJ9YClcblx0XHRcdHRocm93IGVyclxuXHRcdH1cblxuXHRcdGlmICghcmVwbGFjZUN1cnJlbnRMaW5lKSB7XG5cdFx0XHRyZXR1cm5cblx0XHR9XG5cblx0XHQvLyBpbiBjYXNlIGZpbGVNYW5hZ2VyLnJlbmFtZUZpbGUgbWF5IG5vdCB1cGRhdGUgdGhlIGludGVybmFsIGxpbmsgaW4gdGhlIGFjdGl2ZSBmaWxlLFxuXHRcdC8vIHdlIG1hbnVhbGx5IHJlcGxhY2UgdGhlIGN1cnJlbnQgbGluZSBieSBtYW5pcHVsYXRpbmcgdGhlIGVkaXRvclxuXG5cdFx0Y29uc3QgbmV3TGlua1RleHQgPSB0aGlzLmFwcC5maWxlTWFuYWdlci5nZW5lcmF0ZU1hcmtkb3duTGluayhmaWxlLCBzb3VyY2VQYXRoKVxuXHRcdGRlYnVnTG9nKCdyZXBsYWNlIHRleHQnLCBsaW5rVGV4dCwgbmV3TGlua1RleHQpXG5cblx0XHRjb25zdCBlZGl0b3IgPSB0aGlzLmdldEFjdGl2ZUVkaXRvcigpXG5cdFx0aWYgKCFlZGl0b3IpIHtcblx0XHRcdG5ldyBOb3RpY2UoYEZhaWxlZCB0byByZW5hbWUgJHtuZXdOYW1lfTogbm8gYWN0aXZlIGVkaXRvcmApXG5cdFx0XHRyZXR1cm5cblx0XHR9XG5cblx0XHRjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKClcblx0XHRjb25zdCBsaW5lID0gZWRpdG9yLmdldExpbmUoY3Vyc29yLmxpbmUpXG5cdFx0Y29uc3QgcmVwbGFjZWRMaW5lID0gbGluZS5yZXBsYWNlKGxpbmtUZXh0LCBuZXdMaW5rVGV4dClcblx0XHRkZWJ1Z0xvZygnY3VycmVudCBsaW5lIC0+IHJlcGxhY2VkIGxpbmUnLCBsaW5lLCByZXBsYWNlZExpbmUpXG5cdFx0Ly8gY29uc29sZS5sb2coJ2VkaXRvciBjb250ZXh0JywgY3Vyc29yLCApXG5cdFx0ZWRpdG9yLnRyYW5zYWN0aW9uKHtcblx0XHRcdGNoYW5nZXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGZyb206IHsuLi5jdXJzb3IsIGNoOiAwfSxcblx0XHRcdFx0XHR0bzogey4uLmN1cnNvciwgY2g6IGxpbmUubGVuZ3RofSxcblx0XHRcdFx0XHR0ZXh0OiByZXBsYWNlZExpbmUsXG5cdFx0XHRcdH1cblx0XHRcdF1cblx0XHR9KVxuXG5cdFx0aWYgKCF0aGlzLnNldHRpbmdzLmRpc2FibGVSZW5hbWVOb3RpY2UpIHtcblx0XHRcdG5ldyBOb3RpY2UoYFJlbmFtZWQgJHtvcmlnaW5OYW1lfSB0byAke25ld05hbWV9YClcblx0XHR9XG5cdH1cblxuXHRvcGVuUmVuYW1lTW9kYWwoZmlsZTogVEZpbGUsIG5ld05hbWU6IHN0cmluZywgc291cmNlUGF0aDogc3RyaW5nKSB7XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgSW1hZ2VSZW5hbWVNb2RhbChcblx0XHRcdHRoaXMuYXBwLCBmaWxlIGFzIFRGaWxlLCBuZXdOYW1lLFxuXHRcdFx0KGNvbmZpcm1lZE5hbWU6IHN0cmluZykgPT4ge1xuXHRcdFx0XHRkZWJ1Z0xvZygnY29uZmlybWVkTmFtZTonLCBjb25maXJtZWROYW1lKVxuXHRcdFx0XHR0aGlzLnJlbmFtZUZpbGUoZmlsZSwgY29uZmlybWVkTmFtZSwgc291cmNlUGF0aCwgdHJ1ZSlcblx0XHRcdH0sXG5cdFx0XHQoKSA9PiB7XG5cdFx0XHRcdHRoaXMubW9kYWxzLnNwbGljZSh0aGlzLm1vZGFscy5pbmRleE9mKG1vZGFsKSwgMSlcblx0XHRcdH1cblx0XHQpXG5cdFx0dGhpcy5tb2RhbHMucHVzaChtb2RhbClcblx0XHRtb2RhbC5vcGVuKClcblx0XHRkZWJ1Z0xvZygnbW9kYWxzIGNvdW50JywgdGhpcy5tb2RhbHMubGVuZ3RoKVxuXHR9XG5cblx0b3BlbkJhdGNoUmVuYW1lTW9kYWwoKSB7XG5cdFx0Y29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuZ2V0QWN0aXZlRmlsZSgpXG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgSW1hZ2VCYXRjaFJlbmFtZU1vZGFsKFxuXHRcdFx0dGhpcy5hcHAsXG5cdFx0XHRhY3RpdmVGaWxlLFxuXHRcdFx0YXN5bmMgKGZpbGU6IFRGaWxlLCBuYW1lOiBzdHJpbmcpID0+IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5yZW5hbWVGaWxlKGZpbGUsIG5hbWUsIGFjdGl2ZUZpbGUucGF0aClcblx0XHRcdH0sXG5cdFx0XHQoKSA9PiB7XG5cdFx0XHRcdHRoaXMubW9kYWxzLnNwbGljZSh0aGlzLm1vZGFscy5pbmRleE9mKG1vZGFsKSwgMSlcblx0XHRcdH1cblx0XHQpXG5cdFx0dGhpcy5tb2RhbHMucHVzaChtb2RhbClcblx0XHRtb2RhbC5vcGVuKClcblx0fVxuXG5cdGFzeW5jIGJhdGNoUmVuYW1lQWxsSW1hZ2VzKCkge1xuXHRcdGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmdldEFjdGl2ZUZpbGUoKVxuXHRcdGNvbnN0IGZpbGVDYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFjdGl2ZUZpbGUpXG5cdFx0aWYgKCFmaWxlQ2FjaGUgfHwgIWZpbGVDYWNoZS5lbWJlZHMpIHJldHVyblxuXHRcdGNvbnN0IGV4dFBhdHRlcm5SZWdleCA9IC9qcGU/Z3xwbmd8Z2lmfHRpZmZ8d2VicC9pXG5cblx0XHRmb3IgKGNvbnN0IGVtYmVkIG9mIGZpbGVDYWNoZS5lbWJlZHMpIHtcblx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KGVtYmVkLmxpbmssIGFjdGl2ZUZpbGUucGF0aClcblx0XHRcdGlmICghZmlsZSkge1xuXHRcdFx0XHRjb25zb2xlLndhcm4oJ2ZpbGUgbm90IGZvdW5kJywgZW1iZWQubGluaylcblx0XHRcdFx0cmV0dXJuXG5cdFx0XHR9XG5cdFx0XHQvLyBtYXRjaCBleHRcblx0XHRcdGNvbnN0IG0wID0gZXh0UGF0dGVyblJlZ2V4LmV4ZWMoZmlsZS5leHRlbnNpb24pXG5cdFx0XHRpZiAoIW0wKSByZXR1cm5cblxuXHRcdFx0Ly8gcmVuYW1lXG5cdFx0XHRjb25zdCB7IG5ld05hbWUsIGlzTWVhbmluZ2Z1bCB9PSB0aGlzLmdlbmVyYXRlTmV3TmFtZShmaWxlLCBhY3RpdmVGaWxlKVxuXHRcdFx0ZGVidWdMb2coJ2dlbmVyYXRlZCBuZXdOYW1lOicsIG5ld05hbWUsIGlzTWVhbmluZ2Z1bClcblx0XHRcdGlmICghaXNNZWFuaW5nZnVsKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoJ0ZhaWxlZCB0byBiYXRjaCByZW5hbWUgaW1hZ2VzOiB0aGUgZ2VuZXJhdGVkIG5hbWUgaXMgbm90IG1lYW5pbmdmdWwnKVxuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblxuXHRcdFx0YXdhaXQgdGhpcy5yZW5hbWVGaWxlKGZpbGUsIG5ld05hbWUsIGFjdGl2ZUZpbGUucGF0aCwgZmFsc2UpXG5cdFx0fVxuXHR9XG5cblx0Ly8gcmV0dXJucyBhIG5ldyBuYW1lIGZvciB0aGUgaW5wdXQgZmlsZSwgd2l0aCBleHRlbnNpb25cblx0Z2VuZXJhdGVOZXdOYW1lKGZpbGU6IFRGaWxlLCBhY3RpdmVGaWxlOiBURmlsZSkge1xuXHRcdGxldCBpbWFnZU5hbWVLZXkgPSAnJ1xuXHRcdGxldCBmaXJzdEhlYWRpbmcgPSAnJ1xuXHRcdGxldCBmcm9udG1hdHRlclxuXHRcdGNvbnN0IGZpbGVDYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFjdGl2ZUZpbGUpXG5cdFx0aWYgKGZpbGVDYWNoZSkge1xuXHRcdFx0ZGVidWdMb2coJ2Zyb250bWF0dGVyJywgZmlsZUNhY2hlLmZyb250bWF0dGVyKVxuXHRcdFx0ZnJvbnRtYXR0ZXIgPSBmaWxlQ2FjaGUuZnJvbnRtYXR0ZXJcblx0XHRcdGltYWdlTmFtZUtleSA9IGZyb250bWF0dGVyPy5pbWFnZU5hbWVLZXkgfHwgJydcblx0XHRcdGZpcnN0SGVhZGluZyA9IGdldEZpcnN0SGVhZGluZyhmaWxlQ2FjaGUuaGVhZGluZ3MpXG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnNvbGUud2FybignY291bGQgbm90IGdldCBmaWxlIGNhY2hlIGZyb20gYWN0aXZlIGZpbGUnLCBhY3RpdmVGaWxlLm5hbWUpXG5cdFx0fVxuXG5cdFx0Y29uc3Qgc3RlbSA9IHJlbmRlclRlbXBsYXRlKFxuXHRcdFx0dGhpcy5zZXR0aW5ncy5pbWFnZU5hbWVQYXR0ZXJuLFxuXHRcdFx0e1xuXHRcdFx0XHRpbWFnZU5hbWVLZXksXG5cdFx0XHRcdGZpbGVOYW1lOiBhY3RpdmVGaWxlLmJhc2VuYW1lLFxuXHRcdFx0XHRkaXJOYW1lOiBhY3RpdmVGaWxlLnBhcmVudC5uYW1lLFxuXHRcdFx0XHRmaXJzdEhlYWRpbmcsXG5cdFx0XHR9LFxuXHRcdFx0ZnJvbnRtYXR0ZXIpXG5cdFx0Y29uc3QgbWVhbmluZ2xlc3NSZWdleCA9IG5ldyBSZWdFeHAoYFske3RoaXMuc2V0dGluZ3MuZHVwTnVtYmVyRGVsaW1pdGVyfVxcXFxzXWAsICdnbScpXG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0c3RlbSxcblx0XHRcdG5ld05hbWU6IHN0ZW0gKyAnLicgKyBmaWxlLmV4dGVuc2lvbixcblx0XHRcdGlzTWVhbmluZ2Z1bDogc3RlbS5yZXBsYWNlKG1lYW5pbmdsZXNzUmVnZXgsICcnKSAhPT0gJycsXG5cdFx0fVxuXHR9XG5cblx0Ly8gbmV3TmFtZTogZm9vLmV4dFxuXHRhc3luYyBkZWR1cGxpY2F0ZU5ld05hbWUobmV3TmFtZTogc3RyaW5nLCBmaWxlOiBURmlsZSk6IFByb21pc2U8TmFtZU9iaj4ge1xuXHRcdC8vIGxpc3QgZmlsZXMgaW4gZGlyXG5cdFx0Y29uc3QgZGlyID0gZmlsZS5wYXJlbnQucGF0aFxuXHRcdGNvbnN0IGxpc3RlZCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIubGlzdChkaXIpXG5cdFx0ZGVidWdMb2coJ3NpYmxpbmcgZmlsZXMnLCBsaXN0ZWQpXG5cblx0XHQvLyBwYXJzZSBuZXdOYW1lXG5cdFx0Y29uc3QgbmV3TmFtZUV4dCA9IHBhdGguZXh0ZW5zaW9uKG5ld05hbWUpLFxuXHRcdFx0bmV3TmFtZVN0ZW0gPSBuZXdOYW1lLnNsaWNlKDAsIG5ld05hbWUubGVuZ3RoIC0gbmV3TmFtZUV4dC5sZW5ndGggLSAxKSxcblx0XHRcdG5ld05hbWVTdGVtRXNjYXBlZCA9IGVzY2FwZVJlZ0V4cChuZXdOYW1lU3RlbSksXG5cdFx0XHRkZWxpbWl0ZXIgPSB0aGlzLnNldHRpbmdzLmR1cE51bWJlckRlbGltaXRlcixcblx0XHRcdGRlbGltaXRlckVzY2FwZWQgPSBlc2NhcGVSZWdFeHAoZGVsaW1pdGVyKVxuXG5cdFx0bGV0IGR1cE5hbWVSZWdleFxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmR1cE51bWJlckF0U3RhcnQpIHtcblx0XHRcdGR1cE5hbWVSZWdleCA9IG5ldyBSZWdFeHAoXG5cdFx0XHRcdGBeKD88bnVtYmVyPlxcXFxkKykke2RlbGltaXRlckVzY2FwZWR9KD88bmFtZT4ke25ld05hbWVTdGVtRXNjYXBlZH0pXFxcXC4ke25ld05hbWVFeHR9JGApXG5cdFx0fSBlbHNlIHtcblx0XHRcdGR1cE5hbWVSZWdleCA9IG5ldyBSZWdFeHAoXG5cdFx0XHRcdGBeKD88bmFtZT4ke25ld05hbWVTdGVtRXNjYXBlZH0pJHtkZWxpbWl0ZXJFc2NhcGVkfSg/PG51bWJlcj5cXFxcZCspXFxcXC4ke25ld05hbWVFeHR9JGApXG5cdFx0fVxuXHRcdGRlYnVnTG9nKCdkdXBOYW1lUmVnZXgnLCBkdXBOYW1lUmVnZXgpXG5cblx0XHRjb25zdCBkdXBOYW1lTnVtYmVyczogbnVtYmVyW10gPSBbXVxuXHRcdGxldCBpc05ld05hbWVFeGlzdCA9IGZhbHNlXG5cdFx0Zm9yIChsZXQgc2libGluZyBvZiBsaXN0ZWQuZmlsZXMpIHtcblx0XHRcdHNpYmxpbmcgPSBwYXRoLmJhc2VuYW1lKHNpYmxpbmcpXG5cdFx0XHRpZiAoc2libGluZyA9PSBuZXdOYW1lKSB7XG5cdFx0XHRcdGlzTmV3TmFtZUV4aXN0ID0gdHJ1ZVxuXHRcdFx0XHRjb250aW51ZVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBtYXRjaCBkdXBOYW1lc1xuXHRcdFx0Y29uc3QgbSA9IGR1cE5hbWVSZWdleC5leGVjKHNpYmxpbmcpXG5cdFx0XHRpZiAoIW0pIGNvbnRpbnVlXG5cdFx0XHQvLyBwYXJzZSBpbnQgZm9yIG0uZ3JvdXBzLm51bWJlclxuXHRcdFx0ZHVwTmFtZU51bWJlcnMucHVzaChwYXJzZUludChtLmdyb3Vwcy5udW1iZXIpKVxuXHRcdH1cblxuXHRcdGlmIChpc05ld05hbWVFeGlzdCB8fCB0aGlzLnNldHRpbmdzLmR1cE51bWJlckFsd2F5cykge1xuXHRcdFx0Ly8gZ2V0IG1heCBudW1iZXJcblx0XHRcdGNvbnN0IG5ld051bWJlciA9IGR1cE5hbWVOdW1iZXJzLmxlbmd0aCA+IDAgPyBNYXRoLm1heCguLi5kdXBOYW1lTnVtYmVycykgKyAxIDogMVxuXHRcdFx0Ly8gY2hhbmdlIG5ld05hbWVcblx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmR1cE51bWJlckF0U3RhcnQpIHtcblx0XHRcdFx0bmV3TmFtZSA9IGAke25ld051bWJlcn0ke2RlbGltaXRlcn0ke25ld05hbWVTdGVtfS4ke25ld05hbWVFeHR9YFxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0bmV3TmFtZSA9IGAke25ld05hbWVTdGVtfSR7ZGVsaW1pdGVyfSR7bmV3TnVtYmVyfS4ke25ld05hbWVFeHR9YFxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB7XG5cdFx0XHRuYW1lOiBuZXdOYW1lLFxuXHRcdFx0c3RlbTogbmV3TmFtZS5zbGljZSgwLCBuZXdOYW1lLmxlbmd0aCAtIG5ld05hbWVFeHQubGVuZ3RoIC0gMSksXG5cdFx0XHRleHRlbnNpb246IG5ld05hbWVFeHQsXG5cdFx0fVxuXHR9XG5cblx0Z2V0QWN0aXZlRmlsZSgpIHtcblx0XHRjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KVxuXHRcdGNvbnN0IGZpbGUgPSB2aWV3Py5maWxlXG5cdFx0ZGVidWdMb2coJ2FjdGl2ZSBmaWxlJywgZmlsZT8ucGF0aClcblx0XHRyZXR1cm4gZmlsZVxuXHR9XG5cdGdldEFjdGl2ZUVkaXRvcigpIHtcblx0XHRjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KVxuXHRcdHJldHVybiB2aWV3Py5lZGl0b3Jcblx0fVxuXG5cdG9udW5sb2FkKCkge1xuXHRcdHRoaXMubW9kYWxzLm1hcChtb2RhbCA9PiBtb2RhbC5jbG9zZSgpKVxuXHR9XG5cblx0dGVzdEV4Y2x1ZGVFeHRlbnNpb24oZmlsZTogVEZpbGUpOiBib29sZWFuIHtcblx0XHRjb25zdCBwYXR0ZXJuID0gdGhpcy5zZXR0aW5ncy5leGNsdWRlRXh0ZW5zaW9uUGF0dGVyblxuXHRcdGlmICghcGF0dGVybikgcmV0dXJuIGZhbHNlXG5cdFx0cmV0dXJuIG5ldyBSZWdFeHAocGF0dGVybikudGVzdChmaWxlLmV4dGVuc2lvbilcblx0fVxuXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcblx0fVxuXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGdldEZpcnN0SGVhZGluZyhoZWFkaW5ncz86IEhlYWRpbmdDYWNoZVtdKSB7XG5cdGlmIChoZWFkaW5ncyAmJiBoZWFkaW5ncy5sZW5ndGggPiAwKSB7XG5cdFx0Zm9yIChjb25zdCBoZWFkaW5nIG9mIGhlYWRpbmdzKSB7XG5cdFx0XHRpZiAoaGVhZGluZy5sZXZlbCA9PT0gMSkge1xuXHRcdFx0XHRyZXR1cm4gaGVhZGluZy5oZWFkaW5nXG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHJldHVybiAnJ1xufVxuXG5mdW5jdGlvbiBpc1Bhc3RlZEltYWdlKGZpbGU6IFRBYnN0cmFjdEZpbGUpOiBib29sZWFuIHtcblx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuXHRcdGlmIChmaWxlLm5hbWUuc3RhcnRzV2l0aChQQVNURURfSU1BR0VfUFJFRklYKSkge1xuXHRcdFx0cmV0dXJuIHRydWVcblx0XHR9XG5cdH1cblx0cmV0dXJuIGZhbHNlXG59XG5cbmZ1bmN0aW9uIGlzTWFya2Rvd25GaWxlKGZpbGU6IFRBYnN0cmFjdEZpbGUpOiBib29sZWFuIHtcblx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuXHRcdGlmIChmaWxlLmV4dGVuc2lvbiA9PT0gJ21kJykge1xuXHRcdFx0cmV0dXJuIHRydWVcblx0XHR9XG5cdH1cblx0cmV0dXJuIGZhbHNlXG59XG5cbmNvbnN0IElNQUdFX0VYVFMgPSBbXG5cdCdqcGcnLCAnanBlZycsICdwbmcnLCAnZ2lmJywgJ2JtcCcsICdzdmcnLFxuXVxuXG5mdW5jdGlvbiBpc0ltYWdlKGZpbGU6IFRBYnN0cmFjdEZpbGUpOiBib29sZWFuIHtcblx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuXHRcdGlmIChJTUFHRV9FWFRTLmNvbnRhaW5zKGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCkpKSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZVxuXHRcdH1cblx0fVxuXHRyZXR1cm4gZmFsc2Vcbn1cblxuY2xhc3MgSW1hZ2VSZW5hbWVNb2RhbCBleHRlbmRzIE1vZGFsIHtcblx0c3JjOiBURmlsZVxuXHRzdGVtOiBzdHJpbmdcblx0cmVuYW1lRnVuYzogKHBhdGg6IHN0cmluZykgPT4gdm9pZFxuXHRvbkNsb3NlRXh0cmE6ICgpID0+IHZvaWRcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgc3JjOiBURmlsZSwgc3RlbTogc3RyaW5nLCByZW5hbWVGdW5jOiAocGF0aDogc3RyaW5nKSA9PiB2b2lkLCBvbkNsb3NlOiAoKSA9PiB2b2lkKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLnNyYyA9IHNyY1xuXHRcdHRoaXMuc3RlbSA9IHN0ZW1cblx0XHR0aGlzLnJlbmFtZUZ1bmMgPSByZW5hbWVGdW5jXG5cdFx0dGhpcy5vbkNsb3NlRXh0cmEgPSBvbkNsb3NlXG5cdH1cblxuXHRvbk9wZW4oKSB7XG5cdFx0dGhpcy5jb250YWluZXJFbC5hZGRDbGFzcygnaW1hZ2UtcmVuYW1lLW1vZGFsJylcblx0XHRjb25zdCB7IGNvbnRlbnRFbCwgdGl0bGVFbCB9ID0gdGhpcztcblx0XHR0aXRsZUVsLnNldFRleHQoJ1JlbmFtZSBpbWFnZScpXG5cblx0XHRjb25zdCBpbWFnZUNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoe1xuXHRcdFx0Y2xzOiAnaW1hZ2UtY29udGFpbmVyJyxcblx0XHR9KVxuXHRcdGltYWdlQ29udGFpbmVyLmNyZWF0ZUVsKCdpbWcnLCB7XG5cdFx0XHRhdHRyOiB7XG5cdFx0XHRcdHNyYzogdGhpcy5hcHAudmF1bHQuZ2V0UmVzb3VyY2VQYXRoKHRoaXMuc3JjKSxcblx0XHRcdH1cblx0XHR9KVxuXG5cdFx0bGV0IHN0ZW0gPSB0aGlzLnN0ZW1cblx0XHRjb25zdCBleHQgPSB0aGlzLnNyYy5leHRlbnNpb25cblx0XHRjb25zdCBnZXROZXdOYW1lID0gKHN0ZW06IHN0cmluZykgPT4gc3RlbSArICcuJyArIGV4dFxuXHRcdGNvbnN0IGdldE5ld1BhdGggPSAoc3RlbTogc3RyaW5nKSA9PiBwYXRoLmpvaW4odGhpcy5zcmMucGFyZW50LnBhdGgsIGdldE5ld05hbWUoc3RlbSkpXG5cblx0XHRjb25zdCBpbmZvRVQgPSBjcmVhdGVFbGVtZW50VHJlZShjb250ZW50RWwsIHtcblx0XHRcdHRhZzogJ3VsJyxcblx0XHRcdGNsczogJ2luZm8nLFxuXHRcdFx0Y2hpbGRyZW46IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHRhZzogJ2xpJyxcblx0XHRcdFx0XHRjaGlsZHJlbjogW1xuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHR0YWc6ICdzcGFuJyxcblx0XHRcdFx0XHRcdFx0dGV4dDogJ09yaWdpbiBwYXRoJyxcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdHRhZzogJ3NwYW4nLFxuXHRcdFx0XHRcdFx0XHR0ZXh0OiB0aGlzLnNyYy5wYXRoLFxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdF0sXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0YWc6ICdsaScsXG5cdFx0XHRcdFx0Y2hpbGRyZW46IFtcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0dGFnOiAnc3BhbicsXG5cdFx0XHRcdFx0XHRcdHRleHQ6ICdOZXcgcGF0aCcsXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHR0YWc6ICdzcGFuJyxcblx0XHRcdFx0XHRcdFx0dGV4dDogZ2V0TmV3UGF0aChzdGVtKSxcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRdLFxuXHRcdFx0XHR9XG5cdFx0XHRdXG5cdFx0fSlcblxuXHRcdGNvbnN0IGRvUmVuYW1lID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0ZGVidWdMb2coJ2RvUmVuYW1lJywgYHN0ZW09JHtzdGVtfWApXG5cdFx0XHR0aGlzLnJlbmFtZUZ1bmMoZ2V0TmV3TmFtZShzdGVtKSlcblx0XHR9XG5cblx0XHRjb25zdCBuYW1lU2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcblx0XHRcdC5zZXROYW1lKCdOZXcgbmFtZScpXG5cdFx0XHQuc2V0RGVzYygnUGxlYXNlIGlucHV0IHRoZSBuZXcgbmFtZSBmb3IgdGhlIGltYWdlICh3aXRob3V0IGV4dGVuc2lvbiknKVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRWYWx1ZShzdGVtKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0c3RlbSA9IHNhbml0aXplci5maWxlbmFtZSh2YWx1ZSlcblx0XHRcdFx0XHRpbmZvRVQuY2hpbGRyZW5bMV0uY2hpbGRyZW5bMV0uZWwuaW5uZXJUZXh0ID0gZ2V0TmV3UGF0aChzdGVtKVxuXHRcdFx0XHR9XG5cdFx0XHRcdCkpXG5cblx0XHRjb25zdCBuYW1lSW5wdXRFbCA9IG5hbWVTZXR0aW5nLmNvbnRyb2xFbC5jaGlsZHJlblswXSBhcyBIVE1MSW5wdXRFbGVtZW50XG5cdFx0bmFtZUlucHV0RWwuZm9jdXMoKVxuXHRcdGNvbnN0IG5hbWVJbnB1dFN0YXRlID0gbG9ja0lucHV0TWV0aG9kQ29tcG9zaXRpb24obmFtZUlucHV0RWwpXG5cdFx0bmFtZUlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGFzeW5jIChlKSA9PiB7XG5cdFx0XHQvLyBjb25zb2xlLmxvZygna2V5ZG93bicsIGUua2V5LCBgbG9jaz0ke25hbWVJbnB1dFN0YXRlLmxvY2t9YClcblx0XHRcdGlmIChlLmtleSA9PT0gJ0VudGVyJyAmJiAhbmFtZUlucHV0U3RhdGUubG9jaykge1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KClcblx0XHRcdFx0aWYgKCFzdGVtKSB7XG5cdFx0XHRcdFx0ZXJyb3JFbC5pbm5lclRleHQgPSAnRXJyb3I6IFwiTmV3IG5hbWVcIiBjb3VsZCBub3QgYmUgZW1wdHknXG5cdFx0XHRcdFx0ZXJyb3JFbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuXHRcdFx0XHRcdHJldHVyblxuXHRcdFx0XHR9XG5cdFx0XHRcdGRvUmVuYW1lKClcblx0XHRcdFx0dGhpcy5jbG9zZSgpXG5cdFx0XHR9XG5cdFx0fSlcblxuXHRcdGNvbnN0IGVycm9yRWwgPSBjb250ZW50RWwuY3JlYXRlRGl2KHtcblx0XHRcdGNsczogJ2Vycm9yJyxcblx0XHRcdGF0dHI6IHtcblx0XHRcdFx0c3R5bGU6ICdkaXNwbGF5OiBub25lOycsXG5cdFx0XHR9XG5cdFx0fSlcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcblx0XHRcdC5hZGRCdXR0b24oYnV0dG9uID0+IHtcblx0XHRcdFx0YnV0dG9uXG5cdFx0XHRcdFx0LnNldEJ1dHRvblRleHQoJ1JlbmFtZScpXG5cdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0ZG9SZW5hbWUoKVxuXHRcdFx0XHRcdFx0dGhpcy5jbG9zZSgpXG5cdFx0XHRcdFx0fSlcblx0XHRcdH0pXG5cdFx0XHQuYWRkQnV0dG9uKGJ1dHRvbiA9PiB7XG5cdFx0XHRcdGJ1dHRvblxuXHRcdFx0XHRcdC5zZXRCdXR0b25UZXh0KCdDYW5jZWwnKVxuXHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHsgdGhpcy5jbG9zZSgpIH0pXG5cdFx0XHR9KVxuXHR9XG5cblx0b25DbG9zZSgpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0XHR0aGlzLm9uQ2xvc2VFeHRyYSgpXG5cdH1cbn1cblxuY29uc3QgaW1hZ2VOYW1lUGF0dGVybkRlc2MgPSBgXG5UaGUgcGF0dGVybiBpbmRpY2F0ZXMgaG93IHRoZSBuZXcgbmFtZSBzaG91bGQgYmUgZ2VuZXJhdGVkLlxuXG5BdmFpbGFibGUgdmFyaWFibGVzOlxuLSB7e2ZpbGVOYW1lfX06IG5hbWUgb2YgdGhlIGFjdGl2ZSBmaWxlLCB3aXRob3V0IFwiLm1kXCIgZXh0ZW5zaW9uLlxuLSB7e2Rpck5hbWV9fTogbmFtZSBvZiB0aGUgZGlyZWN0b3J5IHdoaWNoIGNvbnRhaW5zIHRoZSBkb2N1bWVudCAodGhlIHJvb3QgZGlyZWN0b3J5IG9mIHZhdWx0IHJlc3VsdHMgaW4gYW4gZW1wdHkgdmFyaWFibGUpLlxuLSB7e2ltYWdlTmFtZUtleX19OiB0aGlzIHZhcmlhYmxlIGlzIHJlYWQgZnJvbSB0aGUgbWFya2Rvd24gZmlsZSdzIGZyb250bWF0dGVyLCBmcm9tIHRoZSBzYW1lIGtleSBcImltYWdlTmFtZUtleVwiLlxuLSB7e0RBVEU6JEZPUk1BVH19OiB1c2UgXCIkRk9STUFUXCIgdG8gZm9ybWF0IHRoZSBjdXJyZW50IGRhdGUsIFwiJEZPUk1BVFwiIG11c3QgYmUgYSBNb21lbnQuanMgZm9ybWF0IHN0cmluZywgZS5nLiB7e0RBVEU6WVlZWS1NTS1ERH19LlxuXG5IZXJlIGFyZSBzb21lIGV4YW1wbGVzIGZyb20gcGF0dGVybiB0byBpbWFnZSBuYW1lcyAocmVwZWF0IGluIHNlcXVlbmNlKSwgdmFyaWFibGVzOiBmaWxlTmFtZSA9IFwiTXkgbm90ZVwiLCBpbWFnZU5hbWVLZXkgPSBcImZvb1wiOlxuLSB7e2ZpbGVOYW1lfX06IE15IG5vdGUsIE15IG5vdGUtMSwgTXkgbm90ZS0yXG4tIHt7aW1hZ2VOYW1lS2V5fX06IGZvbywgZm9vLTEsIGZvby0yXG4tIHt7aW1hZ2VOYW1lS2V5fX0te3tEQVRFOllZWVlNTUREfX06IGZvby0yMDIyMDQwOCwgZm9vLTIwMjIwNDA4LTEsIGZvby0yMDIyMDQwOC0yXG5gXG5cbmNsYXNzIFNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcblx0cGx1Z2luOiBQYXN0ZUltYWdlUmVuYW1lUGx1Z2luO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFBhc3RlSW1hZ2VSZW5hbWVQbHVnaW4pIHtcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHRkaXNwbGF5KCk6IHZvaWQge1xuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0ltYWdlIG5hbWUgcGF0dGVybicpXG5cdFx0XHQuc2V0RGVzYyhpbWFnZU5hbWVQYXR0ZXJuRGVzYylcblx0XHRcdC5zZXRDbGFzcygnbG9uZy1kZXNjcmlwdGlvbi1zZXR0aW5nLWl0ZW0nKVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcigne3tpbWFnZU5hbWVLZXl9fScpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbWFnZU5hbWVQYXR0ZXJuKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaW1hZ2VOYW1lUGF0dGVybiA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9XG5cdFx0XHQpKTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0R1cGxpY2F0ZSBudW1iZXIgYXQgc3RhcnQgKG9yIGVuZCknKVxuXHRcdFx0LnNldERlc2MoYElmIGVuYWJsZWQsIGR1cGxpY2F0ZSBudW1iZXIgd2lsbCBiZSBhZGRlZCBhdCB0aGUgc3RhcnQgYXMgcHJlZml4IGZvciB0aGUgaW1hZ2UgbmFtZSwgb3RoZXJ3aXNlIGl0IHdpbGwgYmUgYWRkZWQgYXQgdGhlIGVuZCBhcyBzdWZmaXggZm9yIHRoZSBpbWFnZSBuYW1lLmApXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmR1cE51bWJlckF0U3RhcnQpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kdXBOdW1iZXJBdFN0YXJ0ID0gdmFsdWVcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKVxuXHRcdFx0XHR9XG5cdFx0XHRcdCkpXG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdEdXBsaWNhdGUgbnVtYmVyIGRlbGltaXRlcicpXG5cdFx0XHQuc2V0RGVzYyhgVGhlIGRlbGltaXRlciB0byBnZW5lcmF0ZSB0aGUgbnVtYmVyIHByZWZpeC9zdWZmaXggZm9yIGR1cGxpY2F0ZWQgbmFtZXMuIEZvciBleGFtcGxlLCBpZiB0aGUgdmFsdWUgaXMgXCItXCIsIHRoZSBzdWZmaXggd2lsbCBiZSBsaWtlIFwiLTFcIiwgXCItMlwiLCBcIi0zXCIsIGFuZCB0aGUgcHJlZml4IHdpbGwgYmUgbGlrZSBcIjEtXCIsIFwiMi1cIiwgXCIzLVwiLiBPbmx5IGNoYXJhY3RlcnMgdGhhdCBhcmUgdmFsaWQgaW4gZmlsZSBuYW1lcyBhcmUgYWxsb3dlZC5gKVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kdXBOdW1iZXJEZWxpbWl0ZXIpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kdXBOdW1iZXJEZWxpbWl0ZXIgPSBzYW5pdGl6ZXIuZGVsaW1pdGVyKHZhbHVlKTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fVxuXHRcdFx0KSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdBbHdheXMgYWRkIGR1cGxpY2F0ZSBudW1iZXInKVxuXHRcdFx0LnNldERlc2MoYElmIGVuYWJsZWQsIGR1cGxpY2F0ZSBudW1iZXIgd2lsbCBhbHdheXMgYmUgYWRkZWQgdG8gdGhlIGltYWdlIG5hbWUuIE90aGVyd2lzZSwgaXQgd2lsbCBvbmx5IGJlIGFkZGVkIHdoZW4gdGhlIG5hbWUgaXMgZHVwbGljYXRlZC5gKVxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kdXBOdW1iZXJBbHdheXMpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kdXBOdW1iZXJBbHdheXMgPSB2YWx1ZVxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpXG5cdFx0XHRcdH1cblx0XHRcdFx0KSlcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0F1dG8gcmVuYW1lJylcblx0XHRcdC5zZXREZXNjKGBCeSBkZWZhdWx0LCB0aGUgcmVuYW1lIG1vZGFsIHdpbGwgYWx3YXlzIGJlIHNob3duIHRvIGNvbmZpcm0gYmVmb3JlIHJlbmFtaW5nLCBpZiB0aGlzIG9wdGlvbiBpcyBzZXQsIHRoZSBpbWFnZSB3aWxsIGJlIGF1dG8gcmVuYW1lZCBhZnRlciBwYXN0aW5nLmApXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9SZW5hbWUpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvUmVuYW1lID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH1cblx0XHRcdCkpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnSGFuZGxlIGFsbCBhdHRhY2htZW50cycpXG5cdFx0XHQuc2V0RGVzYyhgQnkgZGVmYXVsdCwgdGhlIHBsdWdpbiBvbmx5IGhhbmRsZXMgaW1hZ2VzIHRoYXQgc3RhcnRzIHdpdGggXCJQYXN0ZWQgaW1hZ2UgXCIgaW4gbmFtZSxcblx0XHRcdHdoaWNoIGlzIHRoZSBwcmVmaXggT2JzaWRpYW4gdXNlcyB0byBjcmVhdGUgaW1hZ2VzIGZyb20gcGFzdGVkIGNvbnRlbnQuXG5cdFx0XHRJZiB0aGlzIG9wdGlvbiBpcyBzZXQsIHRoZSBwbHVnaW4gd2lsbCBoYW5kbGUgYWxsIGF0dGFjaG1lbnRzIHRoYXQgYXJlIGNyZWF0ZWQgaW4gdGhlIHZhdWx0LmApXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmhhbmRsZUFsbEF0dGFjaG1lbnRzKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaGFuZGxlQWxsQXR0YWNobWVudHMgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fVxuXHRcdFx0KSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdFeGNsdWRlIGV4dGVuc2lvbiBwYXR0ZXJuJylcblx0XHRcdC5zZXREZXNjKGBUaGlzIG9wdGlvbiBpcyBvbmx5IHVzZWZ1bCB3aGVuIFwiSGFuZGxlIGFsbCBhdHRhY2htZW50c1wiIGlzIGVuYWJsZWQuXG5cdFx0XHRXcml0ZSBhIFJlZ2V4IHBhdHRlcm4gdG8gZXhjbHVkZSBjZXJ0YWluIGV4dGVuc2lvbnMgZnJvbSBiZWluZyBoYW5kbGVkLiBPbmx5IHRoZSBmaXJzdCBsaW5lIHdpbGwgYmUgdXNlZC5gKVxuXHRcdFx0LnNldENsYXNzKCdzaW5nbGUtbGluZS10ZXh0YXJlYScpXG5cdFx0XHQuYWRkVGV4dEFyZWEodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignZG9jeD98eGxzeD98cHB0eD98emlwfHJhcicpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5leGNsdWRlRXh0ZW5zaW9uUGF0dGVybilcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmV4Y2x1ZGVFeHRlbnNpb25QYXR0ZXJuID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH1cblx0XHRcdCkpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnRGlzYWJsZSByZW5hbWUgbm90aWNlJylcblx0XHRcdC5zZXREZXNjKGBUdXJuIG9mZiB0aGlzIG9wdGlvbiBpZiB5b3UgZG9uJ3Qgd2FudCB0byBzZWUgdGhlIG5vdGljZSB3aGVuIHJlbmFtaW5nIGltYWdlcy5cblx0XHRcdE5vdGUgdGhhdCBPYnNpZGlhbiBtYXkgZGlzcGxheSBhIG5vdGljZSB3aGVuIGEgbGluayBoYXMgY2hhbmdlZCwgdGhpcyBvcHRpb24gY2Fubm90IGRpc2FibGUgdGhhdC5gKVxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kaXNhYmxlUmVuYW1lTm90aWNlKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZGlzYWJsZVJlbmFtZU5vdGljZSA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9XG5cdFx0XHQpKTtcblx0fVxufVxuIiwgImltcG9ydCB7IE1vZGFsLCBURmlsZSwgQXBwLCBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5pbXBvcnQge1xuICBwYXRoLCBjcmVhdGVFbGVtZW50VHJlZSwgZGVidWdMb2csIGxvY2tJbnB1dE1ldGhvZENvbXBvc2l0aW9uLFxufSBmcm9tICcuL3V0aWxzJztcblxuaW50ZXJmYWNlIFN0YXRlIHtcblx0bmFtZVBhdHRlcm46IHN0cmluZ1xuXHRleHRQYXR0ZXJuOiBzdHJpbmdcblx0bmFtZVJlcGxhY2U6IHN0cmluZ1xuXHRyZW5hbWVUYXNrczogUmVuYW1lVGFza1tdXG59XG5cbmludGVyZmFjZSBSZW5hbWVUYXNrIHtcblx0ZmlsZTogVEZpbGVcblx0bmFtZTogc3RyaW5nXG59XG5cbnR5cGUgcmVuYW1lRnVuY1R5cGUgPSAoZmlsZTogVEZpbGUsIG5hbWU6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPlxuXG5leHBvcnQgY2xhc3MgSW1hZ2VCYXRjaFJlbmFtZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuXHRhY3RpdmVGaWxlOiBURmlsZVxuXHRyZW5hbWVGdW5jOiByZW5hbWVGdW5jVHlwZVxuXHRvbkNsb3NlRXh0cmE6ICgpID0+IHZvaWRcblx0c3RhdGU6IFN0YXRlXG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIGFjdGl2ZUZpbGU6IFRGaWxlLCByZW5hbWVGdW5jOiByZW5hbWVGdW5jVHlwZSwgb25DbG9zZTogKCkgPT4gdm9pZCkge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5hY3RpdmVGaWxlID0gYWN0aXZlRmlsZVxuXHRcdHRoaXMucmVuYW1lRnVuYyA9IHJlbmFtZUZ1bmNcblx0XHR0aGlzLm9uQ2xvc2VFeHRyYSA9IG9uQ2xvc2VcblxuXHRcdHRoaXMuc3RhdGUgPSB7XG5cdFx0XHRuYW1lUGF0dGVybjogJycsXG5cdFx0XHRleHRQYXR0ZXJuOiAnJyxcblx0XHRcdG5hbWVSZXBsYWNlOiAnJyxcblx0XHRcdHJlbmFtZVRhc2tzOiBbXSxcblx0XHR9XG5cdH1cblxuXHRvbk9wZW4oKSB7XG5cdFx0dGhpcy5jb250YWluZXJFbC5hZGRDbGFzcygnaW1hZ2UtcmVuYW1lLW1vZGFsJylcblx0XHRjb25zdCB7IGNvbnRlbnRFbCwgdGl0bGVFbCB9ID0gdGhpcztcblx0XHR0aXRsZUVsLnNldFRleHQoJ0JhdGNoIHJlbmFtZSBlbWJlZGVkIGZpbGVzJylcblxuXHRcdGNvbnN0IG5hbWVQYXR0ZXJuU2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcblx0XHRcdC5zZXROYW1lKCdOYW1lIHBhdHRlcm4nKVxuXHRcdFx0LnNldERlc2MoJ1BsZWFzZSBpbnB1dCB0aGUgbmFtZSBwYXR0ZXJuIHRvIG1hdGNoIGZpbGVzIChyZWdleCknKVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnN0YXRlLm5hbWVQYXR0ZXJuKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5zdGF0ZS5uYW1lUGF0dGVybiA9IHZhbHVlXG5cdFx0XHRcdH1cblx0XHRcdFx0KSlcblx0XHRjb25zdCBucElucHV0RWwgPSBuYW1lUGF0dGVyblNldHRpbmcuY29udHJvbEVsLmNoaWxkcmVuWzBdIGFzIEhUTUxJbnB1dEVsZW1lbnRcblx0XHRucElucHV0RWwuZm9jdXMoKVxuXHRcdGNvbnN0IG5wSW5wdXRTdGF0ZSA9IGxvY2tJbnB1dE1ldGhvZENvbXBvc2l0aW9uKG5wSW5wdXRFbClcblx0XHRucElucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGFzeW5jIChlKSA9PiB7XG5cdFx0XHRpZiAoZS5rZXkgPT09ICdFbnRlcicgJiYgIW5wSW5wdXRTdGF0ZS5sb2NrKSB7XG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKVxuXHRcdFx0XHRpZiAoIXRoaXMuc3RhdGUubmFtZVBhdHRlcm4pIHtcblx0XHRcdFx0XHRlcnJvckVsLmlubmVyVGV4dCA9ICdFcnJvcjogXCJOYW1lIHBhdHRlcm5cIiBjb3VsZCBub3QgYmUgZW1wdHknXG5cdFx0XHRcdFx0ZXJyb3JFbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuXHRcdFx0XHRcdHJldHVyblxuXHRcdFx0XHR9XG5cdFx0XHRcdHRoaXMubWF0Y2hJbWFnZU5hbWVzKHRib2R5RWwpXG5cdFx0XHR9XG5cdFx0fSlcblxuXHRcdGNvbnN0IGV4dFBhdHRlcm5TZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0LnNldE5hbWUoJ0V4dGVuc2lvbiBwYXR0ZXJuJylcblx0XHRcdC5zZXREZXNjKCdQbGVhc2UgaW5wdXQgdGhlIGV4dGVuc2lvbiBwYXR0ZXJuIHRvIG1hdGNoIGZpbGVzIChyZWdleCknKVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnN0YXRlLmV4dFBhdHRlcm4pXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnN0YXRlLmV4dFBhdHRlcm4gPSB2YWx1ZVxuXHRcdFx0XHR9XG5cdFx0XHRcdCkpXG5cdFx0Y29uc3QgZXh0SW5wdXRFbCA9IGV4dFBhdHRlcm5TZXR0aW5nLmNvbnRyb2xFbC5jaGlsZHJlblswXSBhcyBIVE1MSW5wdXRFbGVtZW50XG5cdFx0ZXh0SW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgYXN5bmMgKGUpID0+IHtcblx0XHRcdGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KClcblx0XHRcdFx0dGhpcy5tYXRjaEltYWdlTmFtZXModGJvZHlFbClcblx0XHRcdH1cblx0XHR9KVxuXG5cdFx0Y29uc3QgbmFtZVJlcGxhY2VTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0LnNldE5hbWUoJ05hbWUgcmVwbGFjZScpXG5cdFx0XHQuc2V0RGVzYygnUGxlYXNlIGlucHV0IHRoZSBzdHJpbmcgdG8gcmVwbGFjZSB0aGUgbWF0Y2hlZCBuYW1lICh1c2UgJDEsICQyIGZvciByZWdleCBncm91cHMpJylcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5zdGF0ZS5uYW1lUmVwbGFjZSlcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMuc3RhdGUubmFtZVJlcGxhY2UgPSB2YWx1ZVxuXHRcdFx0XHR9XG5cdFx0XHRcdCkpXG5cblx0XHRjb25zdCBucklucHV0RWwgPSBuYW1lUmVwbGFjZVNldHRpbmcuY29udHJvbEVsLmNoaWxkcmVuWzBdIGFzIEhUTUxJbnB1dEVsZW1lbnRcblx0XHRjb25zdCBucklucHV0U3RhdGUgPSBsb2NrSW5wdXRNZXRob2RDb21wb3NpdGlvbihucklucHV0RWwpXG5cdFx0bnJJbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBhc3luYyAoZSkgPT4ge1xuXHRcdFx0aWYgKGUua2V5ID09PSAnRW50ZXInICYmICFucklucHV0U3RhdGUubG9jaykge1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KClcblx0XHRcdFx0dGhpcy5tYXRjaEltYWdlTmFtZXModGJvZHlFbClcblx0XHRcdH1cblx0XHR9KVxuXG5cblx0XHRjb25zdCBtYXRjaGVkQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7XG5cdFx0XHRjbHM6ICdtYXRjaGVkLWNvbnRhaW5lcicsXG5cdFx0fSlcblx0XHRjb25zdCB0YWJsZUVUID0gY3JlYXRlRWxlbWVudFRyZWUobWF0Y2hlZENvbnRhaW5lciwge1xuXHRcdFx0dGFnOiAndGFibGUnLFxuXHRcdFx0Y2hpbGRyZW46IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHRhZzogJ3RoZWFkJyxcblx0XHRcdFx0XHRjaGlsZHJlbjogW1xuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHR0YWc6ICd0cicsXG5cdFx0XHRcdFx0XHRcdGNoaWxkcmVuOiBbXG5cdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0dGFnOiAndGQnLFxuXHRcdFx0XHRcdFx0XHRcdFx0dGV4dDogJ09yaWdpbmFsIHBhdGgnLFxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0dGFnOiAndGQnLFxuXHRcdFx0XHRcdFx0XHRcdFx0dGV4dDogJ1JlbmFtZWQgTmFtZScsXG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRdXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XVxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dGFnOiAndGJvZHknLFxuXHRcdFx0XHR9XG5cdFx0XHRdXG5cdFx0fSlcblx0XHRjb25zdCB0Ym9keUVsID0gdGFibGVFVC5jaGlsZHJlblsxXS5lbFxuXG5cdFx0Y29uc3QgZXJyb3JFbCA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoe1xuXHRcdFx0Y2xzOiAnZXJyb3InLFxuXHRcdFx0YXR0cjoge1xuXHRcdFx0XHRzdHlsZTogJ2Rpc3BsYXk6IG5vbmU7Jyxcblx0XHRcdH1cblx0XHR9KVxuXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0LmFkZEJ1dHRvbihidXR0b24gPT4ge1xuXHRcdFx0XHRidXR0b25cblx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dCgnUmVuYW1lIGFsbCcpXG5cdFx0XHRcdFx0LnNldENsYXNzKCdtb2QtY3RhJylcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHRuZXcgQ29uZmlybU1vZGFsKFxuXHRcdFx0XHRcdFx0XHR0aGlzLmFwcCxcblx0XHRcdFx0XHRcdFx0J0NvbmZpcm0gcmVuYW1lIGFsbCcsXG5cdFx0XHRcdFx0XHRcdGBBcmUgeW91IHN1cmU/IFRoaXMgd2lsbCByZW5hbWUgYWxsIHRoZSAke3RoaXMuc3RhdGUucmVuYW1lVGFza3MubGVuZ3RofSBpbWFnZXMgbWF0Y2hlZCB0aGUgcGF0dGVybi5gLFxuXHRcdFx0XHRcdFx0XHQoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5hbWVBbGwoKVxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuY2xvc2UoKVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHQpLm9wZW4oKVxuXHRcdFx0XHRcdH0pXG5cdFx0XHR9KVxuXHRcdFx0LmFkZEJ1dHRvbihidXR0b24gPT4ge1xuXHRcdFx0XHRidXR0b25cblx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dCgnQ2FuY2VsJylcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7IHRoaXMuY2xvc2UoKSB9KVxuXHRcdFx0fSlcblx0fVxuXG5cdG9uQ2xvc2UoKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XG5cdFx0dGhpcy5vbkNsb3NlRXh0cmEoKVxuXHR9XG5cblx0YXN5bmMgcmVuYW1lQWxsKCkge1xuXHRcdGRlYnVnTG9nKCdyZW5hbWVBbGwnLCB0aGlzLnN0YXRlKVxuXHRcdGZvciAoY29uc3QgdGFzayBvZiB0aGlzLnN0YXRlLnJlbmFtZVRhc2tzKSB7XG5cdFx0XHRhd2FpdCB0aGlzLnJlbmFtZUZ1bmModGFzay5maWxlLCB0YXNrLm5hbWUpXG5cdFx0fVxuXHR9XG5cblx0bWF0Y2hJbWFnZU5hbWVzKHRib2R5RWw6IEhUTUxFbGVtZW50KSB7XG5cdFx0Y29uc3QgeyBzdGF0ZSB9ID0gdGhpc1xuXHRcdGNvbnN0IHJlbmFtZVRhc2tzOiBSZW5hbWVUYXNrW10gPSBbXVxuXHRcdHRib2R5RWwuZW1wdHkoKVxuXHRcdGNvbnN0IGZpbGVDYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKHRoaXMuYWN0aXZlRmlsZSlcblx0XHRpZiAoIWZpbGVDYWNoZSB8fCAhZmlsZUNhY2hlLmVtYmVkcykgcmV0dXJuXG5cblx0XHRjb25zdCBuYW1lUGF0dGVyblJlZ2V4ID0gbmV3IFJlZ0V4cChzdGF0ZS5uYW1lUGF0dGVybiwgJ2cnKVxuXHRcdGNvbnN0IGV4dFBhdHRlcm5SZWdleCA9IG5ldyBSZWdFeHAoc3RhdGUuZXh0UGF0dGVybilcblx0XHRmaWxlQ2FjaGUuZW1iZWRzLmZvckVhY2goZW1iZWQgPT4ge1xuXHRcdFx0Y29uc3QgZmlsZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QoZW1iZWQubGluaywgdGhpcy5hY3RpdmVGaWxlLnBhdGgpXG5cdFx0XHRpZiAoIWZpbGUpIHtcblx0XHRcdFx0Y29uc29sZS53YXJuKCdmaWxlIG5vdCBmb3VuZCcsIGVtYmVkLmxpbmspXG5cdFx0XHRcdHJldHVyblxuXHRcdFx0fVxuXHRcdFx0Ly8gbWF0Y2ggZXh0IChvbmx5IGlmIGV4dFBhdHRlcm4gaXMgbm90IGVtcHR5KVxuXHRcdFx0aWYgKHN0YXRlLmV4dFBhdHRlcm4pIHtcblx0XHRcdFx0Y29uc3QgbTAgPSBleHRQYXR0ZXJuUmVnZXguZXhlYyhmaWxlLmV4dGVuc2lvbilcblx0XHRcdFx0aWYgKCFtMCkgcmV0dXJuXG5cdFx0XHR9XG5cblx0XHRcdC8vIG1hdGNoIHN0ZW1cblx0XHRcdGNvbnN0IHN0ZW0gPSBmaWxlLmJhc2VuYW1lXG5cdFx0XHRuYW1lUGF0dGVyblJlZ2V4Lmxhc3RJbmRleCA9IDBcblx0XHRcdGNvbnN0IG0xID0gbmFtZVBhdHRlcm5SZWdleC5leGVjKHN0ZW0pXG5cdFx0XHRpZiAoIW0xKSByZXR1cm5cblxuXHRcdFx0bGV0IHJlbmFtZWROYW1lID0gZmlsZS5uYW1lXG5cdFx0XHRpZiAoc3RhdGUubmFtZVJlcGxhY2UpIHtcblx0XHRcdFx0bmFtZVBhdHRlcm5SZWdleC5sYXN0SW5kZXggPSAwXG5cdFx0XHRcdHJlbmFtZWROYW1lID0gc3RlbS5yZXBsYWNlKG5hbWVQYXR0ZXJuUmVnZXgsIHN0YXRlLm5hbWVSZXBsYWNlKVxuXHRcdFx0XHRyZW5hbWVkTmFtZSA9IGAke3JlbmFtZWROYW1lfS4ke2ZpbGUuZXh0ZW5zaW9ufWBcblx0XHRcdH1cblx0XHRcdHJlbmFtZVRhc2tzLnB1c2goe1xuXHRcdFx0XHRmaWxlLFxuXHRcdFx0XHRuYW1lOiByZW5hbWVkTmFtZSxcblx0XHRcdH0pXG5cblx0XHRcdGNyZWF0ZUVsZW1lbnRUcmVlKHRib2R5RWwsIHtcblx0XHRcdFx0dGFnOiAndHInLFxuXHRcdFx0XHRjaGlsZHJlbjogW1xuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHRhZzogJ3RkJyxcblx0XHRcdFx0XHRcdGNoaWxkcmVuOiBbXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHR0YWc6ICdzcGFuJyxcblx0XHRcdFx0XHRcdFx0XHR0ZXh0OiBmaWxlLm5hbWUsXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHR0YWc6ICdkaXYnLFxuXHRcdFx0XHRcdFx0XHRcdHRleHQ6IGZpbGUucGF0aCxcblx0XHRcdFx0XHRcdFx0XHRhdHRyOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjbGFzczogJ2ZpbGUtcGF0aCcsXG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRdXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHR0YWc6ICd0ZCcsXG5cdFx0XHRcdFx0XHRjaGlsZHJlbjogW1xuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0dGFnOiAnc3BhbicsXG5cdFx0XHRcdFx0XHRcdFx0dGV4dDogcmVuYW1lZE5hbWUsXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHR0YWc6ICdkaXYnLFxuXHRcdFx0XHRcdFx0XHRcdHRleHQ6IHBhdGguam9pbihmaWxlLnBhcmVudC5wYXRoLCByZW5hbWVkTmFtZSksXG5cdFx0XHRcdFx0XHRcdFx0YXR0cjoge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y2xhc3M6ICdmaWxlLXBhdGgnLFxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XVxuXG5cdFx0XHR9KVxuXHRcdH0pXG5cblx0XHRkZWJ1Z0xvZygnbmV3IHJlbmFtZVRhc2tzJywgcmVuYW1lVGFza3MpXG5cdFx0c3RhdGUucmVuYW1lVGFza3MgPSByZW5hbWVUYXNrc1xuXHR9XG59XG5cblxuY2xhc3MgQ29uZmlybU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuXHR0aXRsZTogc3RyaW5nXG5cdG1lc3NhZ2U6IHN0cmluZ1xuXHRvbkNvbmZpcm06ICgpID0+IHZvaWRcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgdGl0bGU6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nLCBvbkNvbmZpcm06ICgpID0+IHZvaWQpIHtcblx0XHRzdXBlcihhcHApO1xuXHRcdHRoaXMudGl0bGUgPSB0aXRsZVxuXHRcdHRoaXMubWVzc2FnZSA9IG1lc3NhZ2Vcblx0XHR0aGlzLm9uQ29uZmlybSA9IG9uQ29uZmlybVxuXHR9XG5cblx0b25PcGVuKCk6IHZvaWQge1xuXHRcdGNvbnN0IHsgY29udGVudEVsLCB0aXRsZUVsIH0gPSB0aGlzO1xuXHRcdHRpdGxlRWwuc2V0VGV4dCh0aGlzLnRpdGxlKVxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHtcblx0XHRcdHRleHQ6IHRoaXMubWVzc2FnZSxcblx0XHR9KVxuXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0LmFkZEJ1dHRvbihidXR0b24gPT4ge1xuXHRcdFx0XHRidXR0b25cblx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dCgnWWVzJylcblx0XHRcdFx0XHQuc2V0Q2xhc3MoJ21vZC13YXJuaW5nJylcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLm9uQ29uZmlybSgpXG5cdFx0XHRcdFx0XHR0aGlzLmNsb3NlKClcblx0XHRcdFx0XHR9KVxuXHRcdFx0fSlcblx0XHRcdC5hZGRCdXR0b24oYnV0dG9uID0+IHtcblx0XHRcdFx0YnV0dG9uXG5cdFx0XHRcdFx0LnNldEJ1dHRvblRleHQoJ05vJylcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7IHRoaXMuY2xvc2UoKSB9KVxuXHRcdFx0fSlcblx0fVxufVxuIiwgImltcG9ydCB7XG4gIEFwcCxcbiAgVmF1bHQsXG59IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGNvbnN0IERFQlVHID0gIShwcm9jZXNzLmVudi5CVUlMRF9FTlYgPT09ICdwcm9kdWN0aW9uJylcbmlmIChERUJVRykgY29uc29sZS5sb2coJ0RFQlVHIGlzIGVuYWJsZWQnKVxuXG5leHBvcnQgZnVuY3Rpb24gZGVidWdMb2coLi4uYXJnczogYW55W10pIHtcblx0aWYgKERFQlVHKSB7XG5cdFx0Y29uc29sZS5sb2coKG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMTEsIDIzKSwgLi4uYXJncylcblx0fVxufVxuXG5pbnRlcmZhY2UgRWxlbWVudFRyZWVPcHRpb25zIGV4dGVuZHMgRG9tRWxlbWVudEluZm8ge1xuXHR0YWc6IGtleW9mIEhUTUxFbGVtZW50VGFnTmFtZU1hcFxuXHRjaGlsZHJlbj86IEVsZW1lbnRUcmVlT3B0aW9uc1tdXG59XG5cbmludGVyZmFjZSBFbGVtZW50VHJlZSB7XG5cdGVsOiBIVE1MRWxlbWVudFxuXHRjaGlsZHJlbjogRWxlbWVudFRyZWVbXVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudFRyZWUocm9vdEVsOiBIVE1MRWxlbWVudCwgb3B0czogRWxlbWVudFRyZWVPcHRpb25zKTogRWxlbWVudFRyZWUge1xuXHRjb25zdCByZXN1bHQ6IEVsZW1lbnRUcmVlID0ge1xuXHRcdGVsOiByb290RWwuY3JlYXRlRWwob3B0cy50YWcsIG9wdHMgYXMgRG9tRWxlbWVudEluZm8pLFxuXHRcdGNoaWxkcmVuOiBbXSxcblx0fVxuXHRjb25zdCBjaGlsZHJlbiA9IG9wdHMuY2hpbGRyZW4gfHwgW11cblx0Zm9yIChjb25zdCBjaGlsZCBvZiBjaGlsZHJlbikge1xuXHRcdHJlc3VsdC5jaGlsZHJlbi5wdXNoKGNyZWF0ZUVsZW1lbnRUcmVlKHJlc3VsdC5lbCwgY2hpbGQpKVxuXHR9XG5cdHJldHVybiByZXN1bHRcbn1cblxuZXhwb3J0IGNvbnN0IHBhdGggPSB7XG5cdC8vIENyZWRpdDogQGNyZWF0aW9uaXgvcGF0aC5qc1xuXHRqb2luKC4uLnBhcnRTZWdtZW50czogc3RyaW5nW10pOiBzdHJpbmcge1xuXHRcdC8vIFNwbGl0IHRoZSBpbnB1dHMgaW50byBhIGxpc3Qgb2YgcGF0aCBjb21tYW5kcy5cblx0XHRsZXQgcGFydHM6IHN0cmluZ1tdID0gW11cblx0XHRmb3IgKGxldCBpID0gMCwgbCA9IHBhcnRTZWdtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0XHRcdHBhcnRzID0gcGFydHMuY29uY2F0KHBhcnRTZWdtZW50c1tpXS5zcGxpdCgnLycpKVxuXHRcdH1cblx0XHQvLyBJbnRlcnByZXQgdGhlIHBhdGggY29tbWFuZHMgdG8gZ2V0IHRoZSBuZXcgcmVzb2x2ZWQgcGF0aC5cblx0XHRjb25zdCBuZXdQYXJ0cyA9IFtdXG5cdFx0Zm9yIChsZXQgaSA9IDAsIGwgPSBwYXJ0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0XHRcdGNvbnN0IHBhcnQgPSBwYXJ0c1tpXVxuXHRcdFx0Ly8gUmVtb3ZlIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHNsYXNoZXNcblx0XHRcdC8vIEFsc28gcmVtb3ZlIFwiLlwiIHNlZ21lbnRzXG5cdFx0XHRpZiAoIXBhcnQgfHwgcGFydCA9PT0gJy4nKSBjb250aW51ZVxuXHRcdFx0Ly8gUHVzaCBuZXcgcGF0aCBzZWdtZW50cy5cblx0XHRcdGVsc2UgbmV3UGFydHMucHVzaChwYXJ0KVxuXHRcdH1cblx0XHQvLyBQcmVzZXJ2ZSB0aGUgaW5pdGlhbCBzbGFzaCBpZiB0aGVyZSB3YXMgb25lLlxuXHRcdGlmIChwYXJ0c1swXSA9PT0gJycpIG5ld1BhcnRzLnVuc2hpZnQoJycpXG5cdFx0Ly8gVHVybiBiYWNrIGludG8gYSBzaW5nbGUgc3RyaW5nIHBhdGguXG5cdFx0cmV0dXJuIG5ld1BhcnRzLmpvaW4oJy8nKVxuXHR9LFxuXG5cdC8vIHJldHVybnMgdGhlIGxhc3QgcGFydCBvZiBhIHBhdGgsIGUuZy4gJ2Zvby5qcGcnXG5cdGJhc2VuYW1lKGZ1bGxwYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRcdGNvbnN0IHNwID0gZnVsbHBhdGguc3BsaXQoJy8nKVxuXHRcdHJldHVybiBzcFtzcC5sZW5ndGggLSAxXVxuXHR9LFxuXG5cdC8vIHJldHVybiBleHRlbnNpb24gd2l0aG91dCBkb3QsIGUuZy4gJ2pwZydcblx0ZXh0ZW5zaW9uKGZ1bGxwYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRcdGNvbnN0IHBvc2l0aW9ucyA9IFsuLi5mdWxscGF0aC5tYXRjaEFsbChuZXcgUmVnRXhwKCdcXFxcLicsICdnaScpKV0ubWFwKGEgPT4gYS5pbmRleClcblx0XHRyZXR1cm4gZnVsbHBhdGguc2xpY2UocG9zaXRpb25zW3Bvc2l0aW9ucy5sZW5ndGggLSAxXSArIDEpXG5cdH0sXG59XG5cbmNvbnN0IGZpbGVuYW1lTm90QWxsb3dlZENoYXJzID0gL1teXFxwe0x9MC05fmAhQCQmKigpXFxcXC8tXz0re307J1wiLDwuPj8gXS91Z1xuXG5leHBvcnQgY29uc3Qgc2FuaXRpemVyID0ge1xuXHRmaWxlbmFtZShzOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRcdHJldHVybiBzLnJlcGxhY2UoZmlsZW5hbWVOb3RBbGxvd2VkQ2hhcnMsICcnKS50cmltKClcblx0fSxcblxuXHRkZWxpbWl0ZXIoczogc3RyaW5nKTogc3RyaW5nIHtcblx0XHRzID0gdGhpcy5maWxlbmFtZShzKVxuXHRcdC8vIHVzZSBkZWZhdWx0ICctJyBpZiBubyB2YWxpZCBjaGFycyBmb3VuZFxuXHRcdGlmICghcykgcyA9ICctJ1xuXHRcdHJldHVybiBzXG5cdH1cbn1cblxuLy8gcmVmOiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNjk2OTQ4Ni81OTYyMDZcbmV4cG9ydCBmdW5jdGlvbiBlc2NhcGVSZWdFeHAoczogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHMucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csICdcXFxcJCYnKTtcbn1cblxuXG5pbnRlcmZhY2UgQ29tcG9zaXRpb25TdGF0ZSB7XG5cdGxvY2s6IGJvb2xlYW5cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxvY2tJbnB1dE1ldGhvZENvbXBvc2l0aW9uKGVsOiBIVE1MSW5wdXRFbGVtZW50KTogQ29tcG9zaXRpb25TdGF0ZSB7XG5cdGNvbnN0IHN0YXRlOiBDb21wb3NpdGlvblN0YXRlID0ge1xuXHRcdGxvY2s6IGZhbHNlLFxuXHR9XG5cdGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbXBvc2l0aW9uc3RhcnQnLCAoKSA9PiB7XG5cdFx0c3RhdGUubG9jayA9IHRydWVcblx0fSlcblx0ZWwuYWRkRXZlbnRMaXN0ZW5lcignY29tcG9zaXRpb25lbmQnLCAoKSA9PiB7XG5cdFx0c3RhdGUubG9jayA9IGZhbHNlXG5cdH0pXG5cdHJldHVybiBzdGF0ZVxufVxuXG5cbmludGVyZmFjZSBWYXVsdENvbmZpZyB7XG5cdHVzZU1hcmtkb3duTGlua3M/OiBib29sZWFuXG59XG5cbmludGVyZmFjZSBWYXVsdFdpdGhDb25maWcgZXh0ZW5kcyBWYXVsdCB7XG5cdGNvbmZpZz86IFZhdWx0Q29uZmlnLFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VmF1bHRDb25maWcoYXBwOiBBcHApOiBWYXVsdENvbmZpZ3xudWxsIHtcblx0Y29uc3QgdmF1bHQgPSBhcHAudmF1bHQgYXMgVmF1bHRXaXRoQ29uZmlnXG5cdHJldHVybiB2YXVsdC5jb25maWdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBOYW1lT2JqIHtcblx0bmFtZTogc3RyaW5nXG5cdHN0ZW06IHN0cmluZ1xuXHRleHRlbnNpb246IHN0cmluZ1xufVxuIiwgImltcG9ydCB7IEZyb250TWF0dGVyQ2FjaGUgfSBmcm9tICdvYnNpZGlhbic7XG5cbmNvbnN0IGRhdGVUbXBsUmVnZXggPSAve3tEQVRFOihbXn1dKyl9fS9nbVxuY29uc3QgZnJvbnRtYXR0ZXJUbXBsUmVnZXggPSAve3tmcm9udG1hdHRlcjooW159XSspfX0vZ21cblxuY29uc3QgcmVwbGFjZURhdGVWYXIgPSAoczogc3RyaW5nLCBkYXRlOiBtb21lbnQuTW9tZW50KTogc3RyaW5nID0+IHtcblx0Y29uc3QgbSA9IGRhdGVUbXBsUmVnZXguZXhlYyhzKVxuXHRpZiAoIW0pIHJldHVybiBzXG5cdHJldHVybiBzLnJlcGxhY2UobVswXSwgZGF0ZS5mb3JtYXQobVsxXSkpXG59XG5cbmNvbnN0IHJlcGxhY2VGcm9udG1hdHRlclZhciA9IChzOiBzdHJpbmcsIGZyb250bWF0dGVyPzogRnJvbnRNYXR0ZXJDYWNoZSk6IHN0cmluZyA9PiB7XG5cdGlmICghZnJvbnRtYXR0ZXIpIHJldHVybiBzXG5cdGNvbnN0IG0gPSBmcm9udG1hdHRlclRtcGxSZWdleC5leGVjKHMpXG5cdGlmICghbSkgcmV0dXJuIHNcblx0cmV0dXJuIHMucmVwbGFjZShtWzBdLCBmcm9udG1hdHRlclttWzFdXSB8fCAnJylcbn1cblxuaW50ZXJmYWNlIFRlbXBsYXRlRGF0YSB7XG5cdGltYWdlTmFtZUtleTogc3RyaW5nXG5cdGZpbGVOYW1lOiBzdHJpbmdcblx0ZGlyTmFtZTogc3RyaW5nXG5cdGZpcnN0SGVhZGluZzogc3RyaW5nXG59XG5cbmV4cG9ydCBjb25zdCByZW5kZXJUZW1wbGF0ZSA9ICh0bXBsOiBzdHJpbmcsIGRhdGE6IFRlbXBsYXRlRGF0YSwgZnJvbnRtYXR0ZXI/OiBGcm9udE1hdHRlckNhY2hlKSA9PiB7XG5cdGNvbnN0IG5vdyA9IHdpbmRvdy5tb21lbnQoKVxuXHRsZXQgdGV4dCA9IHRtcGxcblx0bGV0IG5ld3RleHRcblx0d2hpbGUgKChuZXd0ZXh0ID0gcmVwbGFjZURhdGVWYXIodGV4dCwgbm93KSkgIT0gdGV4dCkge1xuXHRcdHRleHQgPSBuZXd0ZXh0XG5cdH1cblx0d2hpbGUgKChuZXd0ZXh0ID0gcmVwbGFjZUZyb250bWF0dGVyVmFyKHRleHQsIGZyb250bWF0dGVyKSkgIT0gdGV4dCkge1xuXHRcdHRleHQgPSBuZXd0ZXh0XG5cdH1cblxuXHR0ZXh0ID0gdGV4dFxuXHRcdC5yZXBsYWNlKC97e2ltYWdlTmFtZUtleX19L2dtLCBkYXRhLmltYWdlTmFtZUtleSlcblx0XHQucmVwbGFjZSgve3tmaWxlTmFtZX19L2dtLCBkYXRhLmZpbGVOYW1lKVxuXHRcdC5yZXBsYWNlKC97e2Rpck5hbWV9fS9nbSwgZGF0YS5kaXJOYW1lKVxuXHRcdC5yZXBsYWNlKC97e2ZpcnN0SGVhZGluZ319L2dtLCBkYXRhLmZpcnN0SGVhZGluZylcblx0cmV0dXJuIHRleHRcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUEsMEJBQUFBLFNBQUE7QUFBQSxJQUFBQSxRQUFBO0FBQUEsTUFDQyxNQUFRO0FBQUEsTUFDUixTQUFXO0FBQUEsTUFDWCxNQUFRO0FBQUEsTUFDUixTQUFXO0FBQUEsUUFDVixPQUFTO0FBQUEsUUFDVCxPQUFTO0FBQUEsUUFDVCxTQUFXO0FBQUEsUUFDWCxTQUFXO0FBQUEsTUFDWjtBQUFBLE1BQ0EsVUFBWSxDQUFDO0FBQUEsTUFDYixRQUFVO0FBQUEsTUFDVixTQUFXO0FBQUEsTUFDWCxpQkFBbUI7QUFBQSxRQUNsQixlQUFlO0FBQUEsUUFDZixvQ0FBb0M7QUFBQSxRQUNwQyw2QkFBNkI7QUFBQSxRQUM3QixtQkFBbUI7QUFBQSxRQUNuQixTQUFXO0FBQUEsUUFDWCxVQUFZO0FBQUEsUUFDWixPQUFTO0FBQUEsUUFDVCxZQUFjO0FBQUEsTUFDZjtBQUFBLE1BQ0EsY0FBZ0I7QUFBQSxRQUNmLFlBQVk7QUFBQSxNQUNiO0FBQUEsSUFDRDtBQUFBO0FBQUE7OztBQzFCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBV0EsSUFBQUMsbUJBV087OztBQ3RCUCxzQkFBMkM7OztBQ0twQyxJQUFNLFFBQVE7QUFDckIsSUFBSTtBQUFPLFVBQVEsSUFBSSxrQkFBa0I7QUFFbEMsU0FBUyxZQUFZLE1BQWE7QUFDeEMsTUFBSSxPQUFPO0FBQ1YsWUFBUSxJQUFLLElBQUksS0FBSyxFQUFHLFlBQVksRUFBRSxNQUFNLElB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LE9BQU8sYUFBYTtBQUFBLE1BQ2hDO0FBQUEsSUFDRCxDQUFDO0FBRUYsUUFBSSx5QkFBUSxXQUFXLEVBQ3JCLFFBQVEsMkJBQTJCLEVBQ25DLFFBQVE7QUFBQSw2R0FDaUcsRUFDekcsU0FBUyxzQkFBc0IsRUFDL0IsWUFBWSxVQUFRLEtBQ25CLGVBQWUsMkJBQTJCLEVBQzFDLFNBQVMsS0FBSyxPQUFPLFNBQVMsdUJBQXVCLEVBQ3JEO0FBQUEsTUFBUyxDQUFPLFVBQVU7QUFDMUIsYUFBSyxPQUFPLFNBQVMsMEJBQTBCO0FBQy9DLGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxNQUNoQztBQUFBLElBQ0QsQ0FBQztBQUVGLFFBQUkseUJBQVEsV0FBVyxFQUNyQixRQUFRLHVCQUF1QixFQUMvQixRQUFRO0FBQUEscUdBQ3lGLEVBQ2pHLFVBQVUsWUFBVSxPQUNuQixTQUFTLEtBQUssT0FBTyxTQUFTLG1CQUFtQixFQUNqRDtBQUFBLE1BQVMsQ0FBTyxVQUFVO0FBQzFCLGFBQUssT0FBTyxTQUFTLHNCQUFzQjtBQUMzQyxjQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsTUFDaEM7QUFBQSxJQUNELENBQUM7QUFBQSxFQUNIO0FBQ0Q7IiwKICAibmFtZXMiOiBbIm1vZHVsZSIsICJpbXBvcnRfb2JzaWRpYW4iLCAic3RlbSJdCn0K
